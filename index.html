<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¦ä¹ èµ„æ–™åˆ†äº«å¹³å°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f7fa;
        }

        /* å¯¼èˆªæ æ ·å¼ */
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            text-decoration: none;
            color: white;
        }

        /* æ±‰å ¡èœå• */
        .hamburger {
            display: none;
            cursor: pointer;
            font-size: 1.5rem;
            z-index: 1001;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-links a:hover {
            color: #ffd700;
            transform: translateY(-2px);
        }

        /* ç”¨æˆ·æ“ä½œæŒ‰é’® */
        .user-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .user-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .user-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .upload-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        /* æ¶ˆæ¯å¾½ç« æ ·å¼ */
        .message-badge {
            background: #f5576c;
            color: white;
            border-radius: 50%;
            padding: 0.1rem 0.5rem;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 0.3rem;
            min-width: 20px;
            text-align: center;
        }

        /* æ¶ˆæ¯æ¨¡æ€æ¡†æ ·å¼ */
        .messages-container {
            max-height: 400px;
            overflow-y: auto;
        }

        .message-item {
            background: #f9f9f9;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
        }

        .message-item:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .message-item.unread {
            background: #e3f2fd;
            border-left-color: #2196F3;
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .message-sender {
            font-weight: 600;
            color: #667eea;
        }

        .message-date {
            font-size: 0.8rem;
            color: #999;
        }

        .message-content {
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }

        .message-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .message-action-btn {
            background: #f0f0f0;
            color: #666;
            border: none;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .message-action-btn:hover {
            background: #667eea;
            color: white;
        }

        /* æ·±è‰²æ¨¡å¼ä¸‹çš„æ¶ˆæ¯æ ·å¼ */
        body.dark-mode .message-item {
            background: #16213e;
        }

        body.dark-mode .message-item.unread {
            background: #0f3460;
        }

        body.dark-mode .message-sender {
            color: #8a94e8;
        }

        body.dark-mode .message-date {
            color: #777;
        }

        body.dark-mode .message-content {
            color: #b0b0b0;
        }

        body.dark-mode .message-action-btn {
            background: #0f3460;
            color: #e0e0e0;
        }

        body.dark-mode .message-action-btn:hover {
            background: #667eea;
            color: white;
        }

        /* æœç´¢æ¡†æ ·å¼ */
        .search-container {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            padding: 0.5rem 1rem;
            backdrop-filter: blur(10px);
            position: relative;
        }

        .search-container input {
            background: transparent;
            border: none;
            color: white;
            padding: 0.5rem;
            outline: none;
            width: 200px;
        }

        .search-container input::placeholder {
            color: rgba(255, 255, 255, 0.8);
        }

        .search-container button {
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            padding: 0.5rem;
        }

        /* æœç´¢å»ºè®®æ ·å¼ */
        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            margin-top: 5px;
            z-index: 1000;
            max-height: 300px;
            overflow-y: auto;
        }

        .search-suggestion-item {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            color: #333;
            transition: all 0.3s ease;
        }

        .search-suggestion-item:last-child {
            border-bottom: none;
        }

        .search-suggestion-item:hover {
            background: #667eea;
            color: white;
        }

        /* æ·±è‰²æ¨¡å¼ä¸‹çš„æœç´¢å»ºè®®æ ·å¼ */
        body.dark-mode .search-suggestions {
            background: #16213e;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        body.dark-mode .search-suggestion-item {
            color: #e0e0e0;
            border-bottom-color: #0f3460;
        }

        body.dark-mode .search-suggestion-item:hover {
            background: #667eea;
            color: white;
        }

        /* è‹±é›„åŒºåŸŸæ ·å¼ */
        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5rem 0;
            text-align: center;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            font-weight: bold;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .hero-search {
            display: flex;
            justify-content: center;
            gap: 1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .hero-search input {
            flex: 1;
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            outline: none;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .hero-search button {
            padding: 1rem 2rem;
            background: #ffd700;
            color: #333;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .hero-search button:hover {
            background: #ffed4e;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .hero-search .advanced-search-btn {
            background: #667eea;
            color: white;
        }

        .hero-search .advanced-search-btn:hover {
            background: #764ba2;
        }

        /* ä¸»è¦å†…å®¹åŒºåŸŸ */
        main {
            padding: 2rem 0;
        }

        /* åˆ†ç±»åŒºåŸŸæ ·å¼ */
        .categories {
            margin-bottom: 3rem;
        }

        .section-title {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 2rem;
            color: #333;
            position: relative;
        }

        .section-title::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0.5rem auto 0;
            border-radius: 2px;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .category-card {
            background: white;
            padding: 2rem 1rem;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            border: 2px solid transparent;
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }

        .category-card.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .category-card.active:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .category-card i {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 1rem;
        }

        .category-card h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
        }

        .category-card.active i {
            color: white;
        }

        .category-card.active h3 {
            color: white;
        }

        /* èµ„æ–™å¡ç‰‡æ ·å¼ */
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .resource-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            border: 1px solid #e0e0e0;
        }

        .resource-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .resource-image {
            height: 180px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }

        .resource-content {
            padding: 1.5rem;
        }

        .resource-category {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-bottom: 1rem;
        }

        .resource-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #333;
            line-height: 1.4;
        }

        .resource-description {
            color: #666;
            margin-bottom: 1rem;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .resource-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            color: #888;
            margin-bottom: 1rem;
        }

        .resource-meta span {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .resource-stats {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            font-size: 0.9rem;
            color: #666;
        }

        .resource-button {
            width: 100%;
            padding: 0.8rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .resource-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        /* æ ‡ç­¾æ ·å¼ */
        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .tag {
            background: #f0f0f0;
            color: #666;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .tag:hover {
            background: #667eea;
            color: white;
        }

        .tag.active {
            background: #667eea;
            color: white;
        }

        /* æ”¶è—å’Œå…³æ³¨åŠŸèƒ½æ ·å¼ */
        .resource-actions {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .action-btn {
            background: #f0f0f0;
            color: #666;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .action-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .action-btn.followed,
        .action-btn.favorited {
            background: #667eea;
            color: white;
        }

        .action-btn.followed::before {
            content: 'âœ… ';
        }

        .action-btn.favorited::before {
            content: 'â¤ï¸ ';
        }

        /* æ·±è‰²æ¨¡å¼ä¸‹çš„æ”¶è—å’Œå…³æ³¨æŒ‰é’®æ ·å¼ */
        body.dark-mode .action-btn {
            background: #0f3460;
            color: #e0e0e0;
        }

        body.dark-mode .action-btn:hover {
            background: #667eea;
            color: white;
        }

        body.dark-mode .action-btn.followed,
        body.dark-mode .action-btn.favorited {
            background: #667eea;
            color: white;
        }

        /* è¯„åˆ†æ ·å¼ */
        .rating-section {
            margin: 1rem 0;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .rating-stars {
            display: flex;
            gap: 0.2rem;
            cursor: pointer;
        }

        .star {
            font-size: 1.2rem;
            color: #ccc;
            transition: all 0.3s ease;
        }

        .star.filled {
            color: #ffd700;
        }

        .star:hover {
            color: #ffd700;
            transform: scale(1.2);
        }

        .rating-text {
            font-weight: 600;
            color: #667eea;
        }

        /* è¯„è®ºæ ·å¼ */
        .comments-section {
            margin: 1rem 0;
        }

        .comment-btn {
            background: #f0f0f0;
            color: #666;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .comment-btn:hover {
            background: #667eea;
            color: white;
        }

        .comment-form {
            margin-top: 1rem;
        }

        .comment-textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            resize: vertical;
            min-height: 100px;
            margin-bottom: 0.5rem;
        }

        .comment-submit {
            background: #667eea;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .comment-submit:hover {
            background: #764ba2;
            transform: translateY(-2px);
        }

        .comments-list {
            margin-top: 1rem;
        }

        .comment-item {
            background: #f9f9f9;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }

        .comment-author {
            font-weight: 600;
            margin-bottom: 0.3rem;
        }

        .comment-content {
            margin-bottom: 0.3rem;
        }

        .comment-date {
            font-size: 0.8rem;
            color: #999;
        }

        /* æ·±è‰²æ¨¡å¼ä¸‹çš„è¯„åˆ†å’Œè¯„è®ºæ ·å¼ */
        body.dark-mode .rating-section .star {
            color: #555;
        }

        body.dark-mode .rating-section .star.filled {
            color: #ffd700;
        }

        body.dark-mode .comment-btn {
            background: #0f3460;
            color: #e0e0e0;
        }

        body.dark-mode .comment-btn:hover {
            background: #667eea;
            color: white;
        }

        body.dark-mode .comment-textarea {
            background: #16213e;
            border-color: #0f3460;
            color: #e0e0e0;
        }

        body.dark-mode .comment-item {
            background: #16213e;
        }

        body.dark-mode .comment-author {
            color: #e0e0e0;
        }

        body.dark-mode .comment-content {
            color: #b0b0b0;
        }

        body.dark-mode .comment-date {
            color: #777;
        }

        /* çƒ­é—¨ã€æœ€æ–°ã€æ¨èåŒºåŸŸ */
        .resources-section {
            margin-bottom: 4rem;
        }

        /* ç­›é€‰å’Œæ’åºå·¥å…·æ  */
        .filter-toolbar {
            background: white;
            padding: 1rem 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .filter-info {
            color: #666;
        }

        .sort-options {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .sort-options label {
            color: #666;
        }

        .sort-options select {
            padding: 0.5rem;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            cursor: pointer;
        }

        /* é¡µè„šæ ·å¼ */
        footer {
            background: #333;
            color: white;
            padding: 3rem 0 1rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: #667eea;
        }

        .footer-section p {
            color: #ccc;
            line-height: 1.6;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 0.5rem;
        }

        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .footer-links a:hover {
            color: #667eea;
            padding-left: 5px;
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: #444;
            color: white;
            border-radius: 50%;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            background: #667eea;
            transform: translateY(-3px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid #444;
            color: #ccc;
            font-size: 0.9rem;
        }

        /* æš—æ¨¡å¼æ”¯æŒ */
        body.dark-mode {
            background-color: #1a1a2e;
            color: #e0e0e0;
        }

        body.dark-mode .resource-card,
        body.dark-mode .category-card,
        body.dark-mode .filter-toolbar {
            background: #16213e;
            border-color: #0f3460;
        }

        body.dark-mode .resource-title {
            color: #e0e0e0;
        }

        body.dark-mode .resource-description,
        body.dark-mode .stat-item,
        body.dark-mode .resource-meta {
            color: #b0b0b0;
        }

        body.dark-mode .tag {
            background: #0f3460;
            color: #e0e0e0;
        }

        body.dark-mode .tag:hover {
            background: #667eea;
            color: white;
        }

        body.dark-mode footer {
            background: #0f0f1e;
        }

        body.dark-mode .footer-bottom {
            border-top-color: #1a1a2e;
        }

        /* åŸºäºç³»ç»Ÿåå¥½çš„æš—æ¨¡å¼æ”¯æŒ */
        @media (prefers-color-scheme: dark) {
            body {
                background-color: #1a1a2e;
                color: #e0e0e0;
            }

            .resource-card,
            .category-card,
            .filter-toolbar {
                background: #16213e;
                border-color: #0f3460;
            }

            .resource-title {
                color: #e0e0e0;
            }

            .resource-description,
            .stat-item,
            .resource-meta {
                color: #b0b0b0;
            }

            .tag {
                background: #0f3460;
                color: #e0e0e0;
            }

            .tag:hover {
                background: #667eea;
                color: white;
            }

            footer {
                background: #0f0f1e;
            }

            .footer-bottom {
                border-top-color: #1a1a2e;
            }
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            nav {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
                gap: 0.5rem;
                padding: 0;
            }

            .nav-links li {
                margin: 0;
            }

            .user-actions {
                flex-wrap: wrap;
                justify-content: center;
                gap: 0.5rem;
            }

            .user-btn {
                padding: 0.4rem 0.8rem;
                font-size: 0.9rem;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .hero-search {
                flex-direction: column;
                align-items: stretch;
            }

            .hero-search input {
                width: 100%;
            }

            .categories-grid {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
                gap: 1rem;
            }

            .category-card {
                padding: 1.5rem 0.5rem;
            }

            .category-card i {
                font-size: 2rem;
            }

            .category-card h3 {
                font-size: 0.9rem;
            }

            .resources-grid {
                grid-template-columns: 1fr;
            }

            .container {
                padding: 0 15px;
            }

            /* ç§»åŠ¨ç«¯æœç´¢å»ºè®®ä¼˜åŒ– */
            .search-suggestions {
                max-width: calc(100vw - 40px);
                left: 20px;
                right: 20px;
            }

            /* ç§»åŠ¨ç«¯æ¨¡æ€æ¡†ä¼˜åŒ– */
            .modal-content {
                width: 95%;
                margin: 10% auto;
            }

            .modal-body {
                padding: 1.5rem;
            }

            /* ç§»åŠ¨ç«¯è¡¨å•ä¼˜åŒ– */
            .form-actions {
                flex-direction: column;
            }

            .form-btn {
                width: 100%;
            }

            /* ç§»åŠ¨ç«¯é€šçŸ¥ä¼˜åŒ– */
            #notifications {
                top: 10px;
                right: 10px;
                left: 10px;
            }

            .notification {
                max-width: none;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 1.5rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .search-container input {
                width: 150px;
            }

            .nav-links {
                font-size: 0.9rem;
            }
        }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.6s ease forwards;
        }

        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            overflow-y: auto;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem 2rem;
            border-radius: 15px 15px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.5rem;
        }

        .close {
            color: white;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close:hover {
            color: #ffd700;
            transform: scale(1.1);
        }

        .modal-body {
            padding: 2rem;
        }

        /* è¡¨å•æ ·å¼ */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #333;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 2rem;
        }

        .form-btn {
            padding: 0.8rem 2rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .form-btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .form-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .form-btn-secondary {
            background: #f0f0f0;
            color: #666;
        }

        .form-btn-secondary:hover {
            background: #e0e0e0;
        }

        /* åŠ è½½æ›´å¤šæŒ‰é’® */
        .load-more {
            display: block;
            margin: 3rem auto;
            padding: 1rem 2rem;
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .load-more:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        /* å›åˆ°é¡¶éƒ¨æŒ‰é’® */
        #backToTop {
            display: none;
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 1000;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 5px 20px rgba(102, 126, 234, 0.2);
            }
            50% {
                box-shadow: 0 8px 30px rgba(102, 126, 234, 0.4);
            }
        }

        #backToTop:hover {
            transform: translateY(-3px) scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            animation: none;
        }

        /* é€šçŸ¥ç³»ç»Ÿæ ·å¼ */
        #notifications {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 3000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .notification {
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideInRight 0.3s ease forwards;
            max-width: 400px;
            width: 100%;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .notification.success {
            border-left: 4px solid #4CAF50;
        }

        .notification.error {
            border-left: 4px solid #f44336;
        }

        .notification.info {
            border-left: 4px solid #2196F3;
        }

        .notification.warning {
            border-left: 4px solid #ff9800;
        }

        .notification-icon {
            font-size: 1.5rem;
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
        }

        .notification-message {
            font-size: 0.9rem;
            color: #666;
        }

        .notification-close {
            background: transparent;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: #999;
            transition: color 0.3s ease;
        }

        .notification-close:hover {
            color: #333;
        }

        /* æ·±è‰²æ¨¡å¼ä¸‹çš„é€šçŸ¥æ ·å¼ */
        body.dark-mode .notification {
            background: #16213e;
        }

        body.dark-mode .notification-title {
            color: #e0e0e0;
        }

        body.dark-mode .notification-message {
            color: #b0b0b0;
        }

        body.dark-mode .notification-close {
            color: #777;
        }

        body.dark-mode .notification-close:hover {
            color: #e0e0e0;
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <header>
        <div class="container">
            <nav>
                    <a href="#" class="logo">ğŸ“š å­¦ä¹ èµ„æ–™åˆ†äº«å¹³å°</a>
                    <div class="hamburger" id="hamburger">
                        â˜°
                    </div>
                    <ul class="nav-links" id="navLinks">
                        <li><a href="#">é¦–é¡µ</a></li>
                        <li><a href="#">åˆ†ç±»æµè§ˆ</a></li>
                        <li><a href="#">çƒ­é—¨èµ„æ–™</a></li>
                        <li><a href="#">æœ€æ–°ä¸Šä¼ </a></li>
                        <li><a href="#" id="rankingBtn">ğŸ† æ’è¡Œæ¦œ</a></li>
                        <li><a href="#" id="learningPathBtn">ğŸ¯ å­¦ä¹ è·¯å¾„</a></li>
                    </ul>
                    <div class="user-actions">
                        <button class="user-btn" id="themeToggle">ğŸŒ“ åˆ‡æ¢ä¸»é¢˜</button>
                        <button class="user-btn" id="messagesBtn">ğŸ’¬ æ¶ˆæ¯ <span class="message-badge" id="messageBadge">0</span></button>
                        <button class="user-btn" id="profileBtn">ğŸ‘¤ ä¸ªäººèµ„æ–™</button>
                        <button class="user-btn" id="loginBtn">ç™»å½•</button>
                        <button class="user-btn" id="registerBtn">æ³¨å†Œ</button>
                        <button class="user-btn upload-btn" id="uploadBtn">ğŸ“¤ ä¸Šä¼ èµ„æ–™</button>
                    </div>
                </nav>
        </div>
    </header>

    <!-- è‹±é›„åŒºåŸŸ -->
    <section class="hero">
        <div class="container">
            <h1>å‘ç°ä¼˜è´¨å­¦ä¹ èµ„æº</h1>
            <p>åˆ†äº«ã€å­¦ä¹ ã€æˆé•¿ - ä¸€ç«™å¼å­¦ä¹ èµ„æ–™åˆ†äº«å¹³å°</p>
            <div class="hero-search">
                <input type="text" placeholder="æœç´¢ä½ éœ€è¦çš„å­¦ä¹ èµ„æ–™...">
                <button>ğŸ” æœç´¢</button>
                <button class="advanced-search-btn" id="advancedSearchBtn">âš™ï¸ é«˜çº§æœç´¢</button>
            </div>
        </div>
    </section>

    <!-- ä¸»è¦å†…å®¹ -->
    <main>
        <div class="container">
            <!-- ç­›é€‰å’Œæ’åºå·¥å…·æ  -->
            <div class="filter-toolbar">
                <div class="filter-info">
                    <span id="resultCount"></span> ä¸ªç»“æœ
                </div>
                <div class="sort-options">
                    <label>æ’åºæ–¹å¼ï¼š</label>
                    <select id="sortSelect">
                        <option value="default">é»˜è®¤æ’åº</option>
                        <option value="downloads">ä¸‹è½½é‡ â†“</option>
                        <option value="rating">è¯„åˆ† â†“</option>
                        <option value="date">æœ€æ–°ä¸Šä¼  â†“</option>
                    </select>
                </div>
            </div>

            <!-- åˆ†ç±»æµè§ˆ -->
            <section class="categories">
                <h2 class="section-title">æµè§ˆåˆ†ç±»</h2>
                <div class="categories-grid">
                    <div class="category-card active">
                        <i>ğŸ </i>
                        <h3>å…¨éƒ¨</h3>
                    </div>
                    <div class="category-card">
                        <i>ğŸ’»</i>
                        <h3>ç¼–ç¨‹å¼€å‘</h3>
                    </div>
                    <div class="category-card">
                        <i>ğŸ“Š</i>
                        <h3>æ•°æ®åˆ†æ</h3>
                    </div>
                    <div class="category-card">
                        <i>ğŸ¨</i>
                        <h3>è®¾è®¡åˆ›æ„</h3>
                    </div>
                    <div class="category-card">
                        <i>ğŸ“š</i>
                        <h3>è¯­è¨€å­¦ä¹ </h3>
                    </div>
                    <div class="category-card">
                        <i>ğŸ“ˆ</i>
                        <h3>å¸‚åœºè¥é”€</h3>
                    </div>
                    <div class="category-card">
                        <i>ğŸ«</i>
                        <h3>æ•™è‚²æ•™å­¦</h3>
                    </div>
                    <div class="category-card">
                        <i>ğŸ’¡</i>
                        <h3>äººå·¥æ™ºèƒ½</h3>
                    </div>
                    <div class="category-card">
                        <i>ğŸ”’</i>
                        <h3>ç½‘ç»œå®‰å…¨</h3>
                    </div>
                </div>
            </section>

            <!-- çƒ­é—¨èµ„æ–™ -->
            <section class="resources-section">
                <h2 class="section-title">ğŸ”¥ çƒ­é—¨èµ„æ–™</h2>
                <div class="resources-grid">
                    <!-- èµ„æ–™å¡ç‰‡ 1 -->
                    <div class="resource-card fade-in-up">
                        <div class="resource-image">ğŸ“–</div>
                        <div class="resource-content">
                            <span class="resource-category">ç¼–ç¨‹å¼€å‘</span>
                            <h3 class="resource-title">Pythonä»å…¥é—¨åˆ°ç²¾é€š</h3>
                            <p class="resource-description">å…¨é¢ç³»ç»Ÿçš„Pythonå­¦ä¹ æ•™ç¨‹ï¼ŒåŒ…å«åŸºç¡€è¯­æ³•ã€è¿›é˜¶æŠ€å·§å’Œå®æˆ˜é¡¹ç›®ã€‚</p>
                            <div class="resource-meta">
                                <span>ğŸ“… 2024-01-15</span>
                                <span>ğŸ‘¤ åˆ†äº«è€…ï¼šç¼–ç¨‹è¾¾äºº</span>
                            </div>
                            <div class="resource-stats">
                                <span class="stat-item">ğŸ“¥ ä¸‹è½½ï¼š1258</span>
                                <span class="stat-item">â­ è¯„åˆ†ï¼š4.8</span>
                                <span class="stat-item">ğŸ’¬ è¯„è®ºï¼š89</span>
                            </div>
                            <div class="resource-actions">
                                <button class="action-btn favorite-btn" data-resource-id="1">â¤ï¸ æ”¶è—</button>
                                <button class="action-btn follow-btn" data-user="ç¼–ç¨‹è¾¾äºº">ğŸ‘¥ å…³æ³¨ä½œè€…</button>
                            </div>
                            <div class="tags">
                                <span class="tag">Python</span>
                                <span class="tag">ç¼–ç¨‹</span>
                                <span class="tag">å…¥é—¨</span>
                            </div>
                            <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                                <button class="resource-button preview-btn" data-resource-id="1">ğŸ‘ï¸ é¢„è§ˆ</button>
                                <button class="resource-button" data-resource-id="1">å…è´¹ä¸‹è½½</button>
                            </div>
                        </div>
                    </div>

                    <!-- èµ„æ–™å¡ç‰‡ 2 -->
                    <div class="resource-card fade-in-up" style="animation-delay: 0.1s;">
                        <div class="resource-image">ğŸ“Š</div>
                        <div class="resource-content">
                            <span class="resource-category">æ•°æ®åˆ†æ</span>
                            <h3 class="resource-title">æ•°æ®åˆ†æå®æˆ˜æŒ‡å—</h3>
                            <p class="resource-description">ä½¿ç”¨Pythonè¿›è¡Œæ•°æ®åˆ†æçš„å®æˆ˜æ•™ç¨‹ï¼ŒåŒ…å«Pandasã€NumPyã€Matplotlibç­‰åº“çš„åº”ç”¨ã€‚</p>
                            <div class="resource-meta">
                                <span>ğŸ“… 2024-01-10</span>
                                <span>ğŸ‘¤ åˆ†äº«è€…ï¼šæ•°æ®åˆ†æå¸ˆ</span>
                            </div>
                            <div class="resource-stats">
                                <span class="stat-item">ğŸ“¥ ä¸‹è½½ï¼š987</span>
                                <span class="stat-item">â­ è¯„åˆ†ï¼š4.7</span>
                                <span class="stat-item">ğŸ’¬ è¯„è®ºï¼š67</span>
                            </div>
                            <div class="resource-actions">
                                <button class="action-btn favorite-btn" data-resource-id="2">â¤ï¸ æ”¶è—</button>
                                <button class="action-btn follow-btn" data-user="æ•°æ®åˆ†æå¸ˆ">ğŸ‘¥ å…³æ³¨ä½œè€…</button>
                            </div>
                            <div class="tags">
                                <span class="tag">æ•°æ®åˆ†æ</span>
                                <span class="tag">Pandas</span>
                                <span class="tag">å¯è§†åŒ–</span>
                            </div>
                            <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                                <button class="resource-button preview-btn" data-resource-id="2">ğŸ‘ï¸ é¢„è§ˆ</button>
                                <button class="resource-button" data-resource-id="2">å…è´¹ä¸‹è½½</button>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="load-more">åŠ è½½æ›´å¤šçƒ­é—¨èµ„æ–™</button>
            </section>

            <!-- æœ€æ–°èµ„æ–™ -->
            <section class="resources-section">
                <h2 class="section-title">ğŸ†• æœ€æ–°ä¸Šä¼ </h2>
                <div class="resources-grid">
                    <!-- èµ„æ–™å¡ç‰‡ 3 -->
                    <div class="resource-card fade-in-up">
                        <div class="resource-image">ğŸ’¡</div>
                        <div class="resource-content">
                            <span class="resource-category">äººå·¥æ™ºèƒ½</span>
                            <h3 class="resource-title">æœºå™¨å­¦ä¹ åŸºç¡€æ•™ç¨‹</h3>
                            <p class="resource-description">æœºå™¨å­¦ä¹ å…¥é—¨æ•™ç¨‹ï¼ŒåŒ…å«ç›‘ç£å­¦ä¹ ã€æ— ç›‘ç£å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ åŸºç¡€ã€‚</p>
                            <div class="resource-meta">
                                <span>ğŸ“… 2024-01-18</span>
                                <span>ğŸ‘¤ åˆ†äº«è€…ï¼šAIç ”ç©¶è€…</span>
                            </div>
                            <div class="resource-stats">
                                <span class="stat-item">ğŸ“¥ ä¸‹è½½ï¼š543</span>
                                <span class="stat-item">â­ è¯„åˆ†ï¼š4.8</span>
                                <span class="stat-item">ğŸ’¬ è¯„è®ºï¼š34</span>
                            </div>
                            <div class="resource-actions">
                                <button class="action-btn favorite-btn" data-resource-id="3">â¤ï¸ æ”¶è—</button>
                                <button class="action-btn follow-btn" data-user="AIç ”ç©¶è€…">ğŸ‘¥ å…³æ³¨ä½œè€…</button>
                            </div>
                            <div class="tags">
                                <span class="tag">æœºå™¨å­¦ä¹ </span>
                                <span class="tag">AI</span>
                                <span class="tag">Python</span>
                            </div>
                            <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                                <button class="resource-button preview-btn" data-resource-id="3">ğŸ‘ï¸ é¢„è§ˆ</button>
                                <button class="resource-button" data-resource-id="3">å…è´¹ä¸‹è½½</button>
                            </div>
                        </div>
                    </div>

                    <!-- èµ„æ–™å¡ç‰‡ 4 -->
                    <div class="resource-card fade-in-up" style="animation-delay: 0.1s;">
                        <div class="resource-image">ğŸ“š</div>
                        <div class="resource-content">
                            <span class="resource-category">è¯­è¨€å­¦ä¹ </span>
                            <h3 class="resource-title">è‹±è¯­è¯­æ³•å¤§å…¨</h3>
                            <p class="resource-description">å…¨é¢çš„è‹±è¯­è¯­æ³•æŒ‡å—ï¼Œé€‚åˆå„ä¸ªæ°´å¹³çš„è‹±è¯­å­¦ä¹ è€…ã€‚</p>
                            <div class="resource-meta">
                                <span>ğŸ“… 2024-01-17</span>
                                <span>ğŸ‘¤ åˆ†äº«è€…ï¼šè‹±è¯­è€å¸ˆ</span>
                            </div>
                            <div class="resource-stats">
                                <span class="stat-item">ğŸ“¥ ä¸‹è½½ï¼š678</span>
                                <span class="stat-item">â­ è¯„åˆ†ï¼š4.7</span>
                                <span class="stat-item">ğŸ’¬ è¯„è®ºï¼š45</span>
                            </div>
                            <div class="resource-actions">
                                <button class="action-btn favorite-btn" data-resource-id="4">â¤ï¸ æ”¶è—</button>
                                <button class="action-btn follow-btn" data-user="è‹±è¯­è€å¸ˆ">ğŸ‘¥ å…³æ³¨ä½œè€…</button>
                            </div>
                            <div class="tags">
                                <span class="tag">è‹±è¯­å­¦ä¹ </span>
                                <span class="tag">è¯­æ³•</span>
                                <span class="tag">é›¶åŸºç¡€</span>
                            </div>
                            <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                                <button class="resource-button preview-btn" data-resource-id="4">ğŸ‘ï¸ é¢„è§ˆ</button>
                                <button class="resource-button" data-resource-id="4">å…è´¹ä¸‹è½½</button>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="load-more">åŠ è½½æ›´å¤šæœ€æ–°èµ„æ–™</button>
            </section>

            <!-- æ¨èèµ„æ–™ -->
            <section class="resources-section">
                <h2 class="section-title">ğŸ’ ç¼–è¾‘æ¨è</h2>
                <div class="resources-grid">
                    <!-- èµ„æ–™å¡ç‰‡ 5 -->
                    <div class="resource-card fade-in-up">
                        <div class="resource-image">ğŸ«</div>
                        <div class="resource-content">
                            <span class="resource-category">æ•™è‚²æ•™å­¦</span>
                            <h3 class="resource-title">é«˜æ•ˆå­¦ä¹ æ–¹æ³•</h3>
                            <p class="resource-description">ç§‘å­¦çš„å­¦ä¹ æ–¹æ³•æŒ‡å—ï¼Œå¸®åŠ©ä½ æé«˜å­¦ä¹ æ•ˆç‡å’Œè®°å¿†åŠ›ã€‚</p>
                            <div class="resource-meta">
                                <span>ğŸ“… 2024-01-12</span>
                                <span>ğŸ‘¤ åˆ†äº«è€…ï¼šæ•™è‚²ä¸“å®¶</span>
                            </div>
                            <div class="resource-stats">
                                <span class="stat-item">ğŸ“¥ ä¸‹è½½ï¼š890</span>
                                <span class="stat-item">â­ è¯„åˆ†ï¼š4.9</span>
                                <span class="stat-item">ğŸ’¬ è¯„è®ºï¼š67</span>
                            </div>
                            <div class="resource-actions">
                                <button class="action-btn favorite-btn" data-resource-id="5">â¤ï¸ æ”¶è—</button>
                                <button class="action-btn follow-btn" data-user="æ•™è‚²ä¸“å®¶">ğŸ‘¥ å…³æ³¨ä½œè€…</button>
                            </div>
                            <div class="tags">
                                <span class="tag">å­¦ä¹ æ–¹æ³•</span>
                                <span class="tag">é«˜æ•ˆå­¦ä¹ </span>
                                <span class="tag">è®°å¿†æŠ€å·§</span>
                            </div>
                            <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                                <button class="resource-button preview-btn" data-resource-id="5">ğŸ‘ï¸ é¢„è§ˆ</button>
                                <button class="resource-button" data-resource-id="5">å…è´¹ä¸‹è½½</button>
                            </div>
                        </div>
                    </div>

                    <!-- èµ„æ–™å¡ç‰‡ 6 -->
                    <div class="resource-card fade-in-up" style="animation-delay: 0.1s;">
                        <div class="resource-image">ğŸ’»</div>
                        <div class="resource-content">
                            <span class="resource-category">ç¼–ç¨‹å¼€å‘</span>
                            <h3 class="resource-title">ç®—æ³•ä¸æ•°æ®ç»“æ„</h3>
                            <p class="resource-description">ç³»ç»Ÿå­¦ä¹ ç®—æ³•ä¸æ•°æ®ç»“æ„ï¼Œæå‡ç¼–ç¨‹èƒ½åŠ›å’Œé—®é¢˜è§£å†³èƒ½åŠ›ã€‚</p>
                            <div class="resource-meta">
                                <span>ğŸ“… 2024-01-08</span>
                                <span>ğŸ‘¤ åˆ†äº«è€…ï¼šç®—æ³•å¤§å¸ˆ</span>
                            </div>
                            <div class="resource-stats">
                                <span class="stat-item">ğŸ“¥ ä¸‹è½½ï¼š1345</span>
                                <span class="stat-item">â­ è¯„åˆ†ï¼š4.8</span>
                                <span class="stat-item">ğŸ’¬ è¯„è®ºï¼š92</span>
                            </div>
                            <div class="resource-actions">
                                <button class="action-btn favorite-btn" data-resource-id="6">â¤ï¸ æ”¶è—</button>
                                <button class="action-btn follow-btn" data-user="ç®—æ³•å¤§å¸ˆ">ğŸ‘¥ å…³æ³¨ä½œè€…</button>
                            </div>
                            <div class="tags">
                                <span class="tag">ç®—æ³•</span>
                                <span class="tag">æ•°æ®ç»“æ„</span>
                                <span class="tag">ç¼–ç¨‹</span>
                            </div>
                            <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                                <button class="resource-button preview-btn" data-resource-id="6">ğŸ‘ï¸ é¢„è§ˆ</button>
                                <button class="resource-button" data-resource-id="6">å…è´¹ä¸‹è½½</button>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="load-more">åŠ è½½æ›´å¤šæ¨èèµ„æ–™</button>
            </section>
        </div>
    </main>

    <!-- é¡µè„š -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>ğŸ“š å­¦ä¹ èµ„æ–™åˆ†äº«å¹³å°</h3>
                    <p>æˆ‘ä»¬è‡´åŠ›äºæ‰“é€ ä¸€ä¸ªå…è´¹ã€ä¼˜è´¨çš„å­¦ä¹ èµ„æ–™åˆ†äº«å¹³å°ï¼Œå¸®åŠ©æ›´å¤šäººè·å–çŸ¥è¯†ï¼Œå®ç°è‡ªæˆ‘æå‡ã€‚</p>
                    <div class="social-links">
                        <a href="#">ğŸ“˜</a>
                        <a href="#">ğŸ¦</a>
                        <a href="#">ğŸ“·</a>
                        <a href="#">ğŸ’¼</a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>è”ç³»æˆ‘ä»¬</h3>
                    <ul class="footer-links">
                        <li>ğŸ“§ email@example.com</li>
                        <li>ğŸ“ 123-456-7890</li>
                        <li>ğŸ“ åŒ—äº¬å¸‚æµ·æ·€åŒºç§‘æŠ€å›­</li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>è®¢é˜…æˆ‘ä»¬</h3>
                    <p>è®¢é˜…æˆ‘ä»¬çš„ newsletterï¼Œè·å–æœ€æ–°èµ„æ–™æ›´æ–°å’Œå­¦ä¹ èµ„è®¯ã€‚</p>
                    <div class="search-container" style="margin-top: 1rem;">
                        <input type="text" placeholder="è¾“å…¥æ‚¨çš„é‚®ç®±">
                        <button>è®¢é˜…</button>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 å­¦ä¹ èµ„æ–™åˆ†äº«å¹³å°. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- æ³¨å†Œæ¨¡æ€æ¡† -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“ ç”¨æˆ·æ³¨å†Œ</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="registerForm">
                    <div class="form-group">
                        <label for="regUsername">ç”¨æˆ·å</label>
                        <input type="text" id="regUsername" name="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" required>
                    </div>
                    <div class="form-group">
                        <label for="regEmail">é‚®ç®±</label>
                        <input type="email" id="regEmail" name="email" placeholder="è¯·è¾“å…¥é‚®ç®±" required>
                    </div>
                    <div class="form-group">
                        <label for="regPassword">å¯†ç </label>
                        <input type="password" id="regPassword" name="password" placeholder="è¯·è¾“å…¥å¯†ç " required minlength="6">
                    </div>
                    <div class="form-group">
                        <label for="regConfirmPassword">ç¡®è®¤å¯†ç </label>
                        <input type="password" id="regConfirmPassword" name="confirmPassword" placeholder="è¯·ç¡®è®¤å¯†ç " required minlength="6">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="form-btn form-btn-secondary" id="closeRegisterModal">å–æ¶ˆ</button>
                        <button type="submit" class="form-btn form-btn-primary">æ³¨å†Œ</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ç™»å½•æ¨¡æ€æ¡† -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ” ç”¨æˆ·ç™»å½•</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail">é‚®ç®±</label>
                        <input type="email" id="loginEmail" name="email" placeholder="è¯·è¾“å…¥é‚®ç®±" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">å¯†ç </label>
                        <input type="password" id="loginPassword" name="password" placeholder="è¯·è¾“å…¥å¯†ç " required minlength="6">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="form-btn form-btn-secondary" id="closeLoginModal">å–æ¶ˆ</button>
                        <button type="submit" class="form-btn form-btn-primary">ç™»å½•</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ä¸Šä¼ èµ„æ–™æ¨¡æ€æ¡† -->
    <div id="uploadModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“¤ ä¸Šä¼ å­¦ä¹ èµ„æ–™</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="uploadForm">
                    <div class="form-group">
                        <label for="uploadTitle">èµ„æ–™æ ‡é¢˜</label>
                        <input type="text" id="uploadTitle" name="title" placeholder="è¯·è¾“å…¥èµ„æ–™æ ‡é¢˜" required>
                    </div>
                    <div class="form-group">
                        <label for="uploadCategory">åˆ†ç±»</label>
                        <select id="uploadCategory" name="category" required>
                            <option value="">è¯·é€‰æ‹©åˆ†ç±»</option>
                            <option value="ç¼–ç¨‹å¼€å‘">ç¼–ç¨‹å¼€å‘</option>
                            <option value="æ•°æ®åˆ†æ">æ•°æ®åˆ†æ</option>
                            <option value="è®¾è®¡åˆ›æ„">è®¾è®¡åˆ›æ„</option>
                            <option value="è¯­è¨€å­¦ä¹ ">è¯­è¨€å­¦ä¹ </option>
                            <option value="å¸‚åœºè¥é”€">å¸‚åœºè¥é”€</option>
                            <option value="æ•™è‚²æ•™å­¦">æ•™è‚²æ•™å­¦</option>
                            <option value="äººå·¥æ™ºèƒ½">äººå·¥æ™ºèƒ½</option>
                            <option value="ç½‘ç»œå®‰å…¨">ç½‘ç»œå®‰å…¨</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="uploadDescription">èµ„æ–™æè¿°</label>
                        <textarea id="uploadDescription" name="description" placeholder="è¯·è¾“å…¥èµ„æ–™æè¿°" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="uploadFile">ä¸Šä¼ æ–‡ä»¶</label>
                        <input type="file" id="uploadFile" name="file" required multiple accept=".pdf,.doc,.docx,.zip,.rar,.mp4,.mp3">
                        <small style="display: block; margin-top: 0.5rem; color: #666; font-size: 0.85rem;">
                            æ”¯æŒæ ¼å¼ï¼šPDF, DOC, DOCX, ZIP, RAR, MP4, MP3
                        </small>
                        <div id="filePreview" style="margin-top: 1rem; display: flex; flex-wrap: wrap; gap: 1rem;"></div>
                        <div id="uploadProgress" style="margin-top: 1rem; display: none;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span>ä¸Šä¼ è¿›åº¦ï¼š</span>
                                <span id="progressPercent">0%</span>
                            </div>
                            <div style="width: 100%; height: 8px; background: #f0f0f0; border-radius: 4px; overflow: hidden;">
                                <div id="progressBar" style="height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); width: 0%; transition: width 0.3s ease;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="uploadTags">æ ‡ç­¾ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰</label>
                        <input type="text" id="uploadTags" name="tags" placeholder="ä¾‹å¦‚ï¼šPython,ç¼–ç¨‹,å…¥é—¨">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="form-btn form-btn-secondary" id="closeUploadModal">å–æ¶ˆ</button>
                        <button type="submit" class="form-btn form-btn-primary">ä¸Šä¼ </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ä¸ªäººèµ„æ–™æ¨¡æ€æ¡† -->
    <div id="profileModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ‘¤ ä¸ªäººèµ„æ–™ç®¡ç†</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div id="profileContent">
                    <div class="form-group">
                        <label>ç”¨æˆ·å</label>
                        <input type="text" id="profileUsername" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" disabled>
                    </div>
                    <div class="form-group">
                        <label>é‚®ç®±</label>
                        <input type="email" id="profileEmail" placeholder="è¯·è¾“å…¥é‚®ç®±" disabled>
                    </div>
                    <div class="form-group">
                        <label>æ³¨å†Œæ—¶é—´</label>
                        <input type="text" id="profileCreatedAt" placeholder="æ³¨å†Œæ—¶é—´" disabled>
                    </div>
                    <div class="form-group">
                        <label>ä¸ªäººç®€ä»‹</label>
                        <textarea id="profileBio" placeholder="è¯·è¾“å…¥ä¸ªäººç®€ä»‹"></textarea>
                    </div>
                    <div class="form-actions" style="margin-top: 1rem;">
                        <button type="button" class="form-btn form-btn-secondary" id="closeProfileModal">å…³é—­</button>
                        <button type="button" class="form-btn form-btn-primary" id="updateProfileBtn">æ›´æ–°èµ„æ–™</button>
                    </div>
                    <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #e0e0e0;">
                        <h3 style="margin-bottom: 1rem;">ğŸ“‹ å†å²è®°å½•</h3>
                        <div style="display: flex; gap: 1rem;">
                            <button type="button" class="form-btn form-btn-secondary" id="viewDownloadHistoryBtn">ğŸ“¥ ä¸‹è½½å†å²</button>
                            <button type="button" class="form-btn form-btn-secondary" id="viewUploadHistoryBtn">ğŸ“¤ ä¸Šä¼ å†å²</button>
                            <button type="button" class="form-btn form-btn-secondary" onclick="viewReportHistory()">ğŸš« ä¸¾æŠ¥è®°å½•</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ¶ˆæ¯æ¨¡æ€æ¡† -->
    <div id="messagesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ’¬ æ¶ˆæ¯ä¸­å¿ƒ</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="messages-container" id="messagesContainer">
                    <!-- æ¶ˆæ¯åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
                </div>
                <div class="form-actions" style="margin-top: 2rem;">
                    <button type="button" class="form-btn form-btn-secondary" id="closeMessagesModal">å…³é—­</button>
                    <button type="button" class="form-btn form-btn-primary" id="markAllReadBtn">æ ‡è®°å…¨éƒ¨å·²è¯»</button>
                </div>
            </div>
        </div>
    </div>

    <!-- é«˜çº§æœç´¢æ¨¡æ€æ¡† -->
    <div id="advancedSearchModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ” é«˜çº§æœç´¢</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="advancedSearchForm">
                    <div class="form-group">
                        <label for="advancedSearchQuery">å…³é”®è¯</label>
                        <input type="text" id="advancedSearchQuery" placeholder="è¾“å…¥æœç´¢å…³é”®è¯">
                    </div>
                    <div class="form-group">
                        <label for="advancedSearchCategory">åˆ†ç±»</label>
                        <select id="advancedSearchCategory">
                            <option value="">å…¨éƒ¨åˆ†ç±»</option>
                            <option value="ç¼–ç¨‹å¼€å‘">ç¼–ç¨‹å¼€å‘</option>
                            <option value="æ•°æ®åˆ†æ">æ•°æ®åˆ†æ</option>
                            <option value="è®¾è®¡åˆ›æ„">è®¾è®¡åˆ›æ„</option>
                            <option value="è¯­è¨€å­¦ä¹ ">è¯­è¨€å­¦ä¹ </option>
                            <option value="å¸‚åœºè¥é”€">å¸‚åœºè¥é”€</option>
                            <option value="æ•™è‚²æ•™å­¦">æ•™è‚²æ•™å­¦</option>
                            <option value="äººå·¥æ™ºèƒ½">äººå·¥æ™ºèƒ½</option>
                            <option value="ç½‘ç»œå®‰å…¨">ç½‘ç»œå®‰å…¨</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="advancedSearchTag">æ ‡ç­¾</label>
                        <input type="text" id="advancedSearchTag" placeholder="è¾“å…¥æ ‡ç­¾åç§°">
                    </div>
                    <div class="form-group">
                        <label>æ—¥æœŸèŒƒå›´</label>
                        <div style="display: flex; gap: 1rem;">
                            <input type="date" id="dateFrom">
                            <input type="date" id="dateTo">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="advancedSearchRating">æœ€ä½è¯„åˆ†</label>
                        <select id="advancedSearchRating">
                            <option value="0">ä¸é™</option>
                            <option value="1">1æ˜ŸåŠä»¥ä¸Š</option>
                            <option value="2">2æ˜ŸåŠä»¥ä¸Š</option>
                            <option value="3">3æ˜ŸåŠä»¥ä¸Š</option>
                            <option value="4">4æ˜ŸåŠä»¥ä¸Š</option>
                            <option value="4.5">4.5æ˜ŸåŠä»¥ä¸Š</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="advancedSearchDownloads">æœ€ä½ä¸‹è½½é‡</label>
                        <select id="advancedSearchDownloads">
                            <option value="0">ä¸é™</option>
                            <option value="10">10æ¬¡åŠä»¥ä¸Š</option>
                            <option value="50">50æ¬¡åŠä»¥ä¸Š</option>
                            <option value="100">100æ¬¡åŠä»¥ä¸Š</option>
                            <option value="500">500æ¬¡åŠä»¥ä¸Š</option>
                            <option value="1000">1000æ¬¡åŠä»¥ä¸Š</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="form-btn form-btn-secondary" id="closeAdvancedSearchModal">å–æ¶ˆ</button>
                        <button type="submit" class="form-btn form-btn-primary">æ‰§è¡Œæœç´¢</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- é¢„è§ˆæ¨¡æ€æ¡† -->
    <div id="previewModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2 id="previewTitle">ğŸ‘ï¸ èµ„æ–™é¢„è§ˆ</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div id="previewContent" style="min-height: 400px; display: flex; align-items: center; justify-content: center;">
                    <!-- é¢„è§ˆå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
                </div>
                <div class="form-actions" style="margin-top: 2rem;">
                    <button type="button" class="form-btn form-btn-secondary" id="closePreviewModal">å…³é—­</button>
                    <button type="button" class="form-btn form-btn-primary" id="downloadFromPreviewBtn">ä¸‹è½½èµ„æ–™</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ä¸‹è½½å†å²è®°å½•æ¨¡æ€æ¡† -->
    <div id="downloadHistoryModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h2>ğŸ“¥ ä¸‹è½½å†å²è®°å½•</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div id="downloadHistoryContent" style="min-height: 400px;">
                    <!-- ä¸‹è½½å†å²è®°å½•å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
                </div>
                <div class="form-actions" style="margin-top: 2rem;">
                    <button type="button" class="form-btn form-btn-secondary" id="closeDownloadHistoryModal">å…³é—­</button>
                    <button type="button" class="form-btn form-btn-primary" id="clearDownloadHistoryBtn">æ¸…ç©ºå†å²</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ä¸Šä¼ å†å²è®°å½•æ¨¡æ€æ¡† -->
    <div id="uploadHistoryModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h2>ğŸ“¤ ä¸Šä¼ å†å²è®°å½•</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div id="uploadHistoryContent" style="min-height: 400px;">
                    <!-- ä¸Šä¼ å†å²è®°å½•å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
                </div>
                <div class="form-actions" style="margin-top: 2rem;">
                    <button type="button" class="form-btn form-btn-secondary" id="closeUploadHistoryModal">å…³é—­</button>
                    <button type="button" class="form-btn form-btn-primary" id="clearUploadHistoryBtn">æ¸…ç©ºå†å²</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ä¸¾æŠ¥æ¨¡æ€æ¡† -->
    <div id="reportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸš« ä¸¾æŠ¥èµ„æ–™</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="reportForm">
                    <input type="hidden" id="reportResourceId" value="">
                    <div class="form-group">
                        <label for="reportReason">ä¸¾æŠ¥åŸå› </label>
                        <select id="reportReason" class="form-control" required>
                            <option value="">è¯·é€‰æ‹©ä¸¾æŠ¥åŸå› </option>
                            <option value="spam">åƒåœ¾ä¿¡æ¯</option>
                            <option value="inappropriate">ä¸å½“å†…å®¹</option>
                            <option value="copyright">ç‰ˆæƒä¾µçŠ¯</option>
                            <option value="duplicate">é‡å¤èµ„æ–™</option>
                            <option value="other">å…¶ä»–åŸå› </option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="reportDescription">è¯¦ç»†æè¿°</label>
                        <textarea id="reportDescription" class="form-control" rows="4" placeholder="è¯·è¯¦ç»†æè¿°ä¸¾æŠ¥åŸå› ..." required></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="form-btn form-btn-secondary" id="closeReportModal">å–æ¶ˆ</button>
                        <button type="submit" class="form-btn form-btn-primary">æäº¤ä¸¾æŠ¥</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ä¸¾æŠ¥è®°å½•æ¨¡æ€æ¡† -->
    <div id="reportHistoryModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h2>ğŸ“‹ æˆ‘çš„ä¸¾æŠ¥è®°å½•</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div id="reportHistoryContent" style="min-height: 400px;">
                    <!-- ä¸¾æŠ¥è®°å½•å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
                </div>
                <div class="form-actions" style="margin-top: 2rem;">
                    <button type="button" class="form-btn form-btn-secondary" id="closeReportHistoryModal">å…³é—­</button>
                </div>
            </div>
        </div>
    </div>

    <!-- åˆ†äº«æ¨¡æ€æ¡† -->
    <div id="shareModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“¤ åˆ†äº«èµ„æ–™</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div id="shareContent">
                    <div class="form-group">
                        <label>èµ„æ–™ä¿¡æ¯</label>
                        <div style="background: #f0f0f0; padding: 1rem; border-radius: 8px;">
                            <h3 id="shareResourceTitle">èµ„æ–™æ ‡é¢˜</h3>
                            <p id="shareResourceDescription">èµ„æ–™æè¿°</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>åˆ†äº«æ–¹å¼</label>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; margin-top: 1rem;">
                            <button class="form-btn form-btn-secondary" onclick="shareToSocial('weixin')">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ’¬</div>
                                <div>å¾®ä¿¡</div>
                            </button>
                            <button class="form-btn form-btn-secondary" onclick="shareToSocial('weibo')">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ“±</div>
                                <div>å¾®åš</div>
                            </button>
                            <button class="form-btn form-btn-secondary" onclick="shareToSocial('qq')">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ’»</div>
                                <div>QQ</div>
                            </button>
                            <button class="form-btn form-btn-secondary" onclick="shareToSocial('linkedin')">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ’¼</div>
                                <div>LinkedIn</div>
                            </button>
                            <button class="form-btn form-btn-secondary" onclick="shareToSocial('copy')">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ“‹</div>
                                <div>å¤åˆ¶é“¾æ¥</div>
                            </button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>åˆ†äº«é“¾æ¥</label>
                        <div style="display: flex; gap: 0.5rem;">
                            <input type="text" id="shareLink" class="form-control" readonly style="flex: 1;">
                            <button class="form-btn form-btn-primary" onclick="copyShareLink()">å¤åˆ¶</button>
                        </div>
                        <small style="display: block; margin-top: 0.5rem; color: #666;">å¤åˆ¶é“¾æ¥åå¯ä»¥åˆ†äº«ç»™å¥½å‹</small>
                    </div>
                </div>
                <div class="form-actions" style="margin-top: 2rem;">
                    <button type="button" class="form-btn form-btn-secondary" id="closeShareModal">å…³é—­</button>
                </div>
            </div>
        </div>
    </div>

    <!-- æ’è¡Œæ¦œæ¨¡æ€æ¡† -->
    <div id="rankingModal" class="modal">
        <div class="modal-content" style="max-width: 1000px;">
            <div class="modal-header">
                <h2>ğŸ† æ’è¡Œæ¦œ</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                    <!-- è´¡çŒ®æ¦œ -->
                    <div>
                        <h3 style="margin-bottom: 1rem; display: flex; align-items: center;">
                            <span style="font-size: 1.5rem; margin-right: 0.5rem;">ğŸ‘‘</span>
                            è´¡çŒ®æ¦œ
                        </h3>
                        <div id="contributionRanking" style="min-height: 300px;">
                            <!-- è´¡çŒ®æ¦œå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
                        </div>
                    </div>
                    
                    <!-- çƒ­é—¨èµ„æ–™æ¦œ -->
                    <div>
                        <h3 style="margin-bottom: 1rem; display: flex; align-items: center;">
                            <span style="font-size: 1.5rem; margin-right: 0.5rem;">ğŸ”¥</span>
                            çƒ­é—¨èµ„æ–™æ¦œ
                        </h3>
                        <div id="popularRanking" style="min-height: 300px;">
                            <!-- çƒ­é—¨èµ„æ–™æ¦œå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
                        </div>
                    </div>
                </div>
                <div class="form-actions" style="margin-top: 2rem;">
                    <button type="button" class="form-btn form-btn-secondary" id="closeRankingModal">å…³é—­</button>
                </div>
            </div>
        </div>
    </div>

    <!-- å­¦ä¹ è·¯å¾„æ¨¡æ€æ¡† -->
    <div id="learningPathModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h2>ğŸ¯ å­¦ä¹ è·¯å¾„</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>é€‰æ‹©å­¦ä¹ é¢†åŸŸ</label>
                    <select id="learningPathCategory" class="form-control" style="margin-top: 0.5rem;">
                        <option value="">è¯·é€‰æ‹©å­¦ä¹ é¢†åŸŸ</option>
                        <option value="ç¼–ç¨‹å¼€å‘">ç¼–ç¨‹å¼€å‘</option>
                        <option value="æ•°æ®åˆ†æ">æ•°æ®åˆ†æ</option>
                        <option value="è®¾è®¡åˆ›æ„">è®¾è®¡åˆ›æ„</option>
                        <option value="è¯­è¨€å­¦ä¹ ">è¯­è¨€å­¦ä¹ </option>
                        <option value="å¸‚åœºè¥é”€">å¸‚åœºè¥é”€</option>
                        <option value="æ•™è‚²æ•™å­¦">æ•™è‚²æ•™å­¦</option>
                        <option value="äººå·¥æ™ºèƒ½">äººå·¥æ™ºèƒ½</option>
                        <option value="ç½‘ç»œå®‰å…¨">ç½‘ç»œå®‰å…¨</option>
                    </select>
                </div>
                <div style="margin-top: 2rem;">
                    <button class="form-btn form-btn-primary" id="generatePathBtn">ç”Ÿæˆå­¦ä¹ è·¯å¾„</button>
                </div>
                <div id="learningPathContent" style="margin-top: 2rem; min-height: 400px;">
                    <!-- å­¦ä¹ è·¯å¾„å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
                </div>
                <div class="form-actions" style="margin-top: 2rem;">
                    <button type="button" class="form-btn form-btn-secondary" id="closeLearningPathModal">å…³é—­</button>
                </div>
            </div>
        </div>
    </div>

    <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
    <button id="backToTop">â†‘</button>

    <script>
        // é¡µé¢åŠ è½½åŠ¨ç”»
        window.addEventListener('load', function() {
            const elements = document.querySelectorAll('.fade-in-up');
            elements.forEach((element, index) => {
                element.style.opacity = '0';
                setTimeout(() => {
                    element.style.opacity = '1';
                }, index * 100);
            });
            
            // åˆå§‹åŒ–ç»“æœè®¡æ•°
            const totalCards = document.querySelectorAll('.resource-card').length;
            document.getElementById('resultCount').textContent = totalCards;
        });

        // æ¨¡æ€æ¡†åŠŸèƒ½
        const modals = {
            register: document.getElementById('registerModal'),
            login: document.getElementById('loginModal'),
            upload: document.getElementById('uploadModal'),
            profile: document.getElementById('profileModal'),
            messages: document.getElementById('messagesModal'),
            advancedSearch: document.getElementById('advancedSearchModal'),
            preview: document.getElementById('previewModal'),
            downloadHistory: document.getElementById('downloadHistoryModal'),
            uploadHistory: document.getElementById('uploadHistoryModal'),
            report: document.getElementById('reportModal'),
            reportHistory: document.getElementById('reportHistoryModal'),
            share: document.getElementById('shareModal'),
            ranking: document.getElementById('rankingModal'),
            learningPath: document.getElementById('learningPathModal')
        };

        const modalTriggers = {
            register: document.getElementById('registerBtn'),
            login: document.getElementById('loginBtn'),
            upload: document.getElementById('uploadBtn'),
            profile: document.getElementById('profileBtn'),
            messages: document.getElementById('messagesBtn'),
            advancedSearch: document.getElementById('advancedSearchBtn'),
            ranking: document.getElementById('rankingBtn'),
            learningPath: document.getElementById('learningPathBtn')
        };

        const modalClosers = {
            register: document.querySelectorAll('#registerModal .close, #closeRegisterModal'),
            login: document.querySelectorAll('#loginModal .close, #closeLoginModal'),
            upload: document.querySelectorAll('#uploadModal .close, #closeUploadModal'),
            profile: document.querySelectorAll('#profileModal .close, #closeProfileModal'),
            messages: document.querySelectorAll('#messagesModal .close, #closeMessagesModal'),
            advancedSearch: document.querySelectorAll('#advancedSearchModal .close, #closeAdvancedSearchModal'),
            preview: document.querySelectorAll('#previewModal .close, #closePreviewModal'),
            downloadHistory: document.querySelectorAll('#downloadHistoryModal .close, #closeDownloadHistoryModal'),
            uploadHistory: document.querySelectorAll('#uploadHistoryModal .close, #closeUploadHistoryModal'),
            report: document.querySelectorAll('#reportModal .close, #closeReportModal'),
            reportHistory: document.querySelectorAll('#reportHistoryModal .close, #closeReportHistoryModal'),
            share: document.querySelectorAll('#shareModal .close, #closeShareModal'),
            ranking: document.querySelectorAll('#rankingModal .close, #closeRankingModal')
        };

        // åŠ è½½ä¸ªäººèµ„æ–™
        function loadProfile() {
            if (!currentUser) {
                showNotification('è¯·å…ˆç™»å½•åæŸ¥çœ‹ä¸ªäººèµ„æ–™', 'warning');
                return false;
            }
            
            // åŠ è½½ç”¨æˆ·æ•°æ®
            document.getElementById('profileUsername').value = currentUser.username;
            document.getElementById('profileEmail').value = currentUser.email;
            document.getElementById('profileCreatedAt').value = new Date(currentUser.createdAt).toLocaleString();
            document.getElementById('profileBio').value = currentUser.bio || '';
            
            return true;
        }

        // æ‰“å¼€æ¨¡æ€æ¡†
        Object.keys(modalTriggers).forEach(key => {
            modalTriggers[key].addEventListener('click', function() {
                if (key === 'upload' && !currentUser) {
                    showNotification('è¯·å…ˆç™»å½•åå†ä¸Šä¼ èµ„æ–™', 'warning');
                    return;
                }
                if (key === 'profile') {
                    if (!loadProfile()) {
                        return;
                    }
                }
                if (key === 'messages') {
                    if (!currentUser) {
                        showNotification('è¯·å…ˆç™»å½•åæŸ¥çœ‹æ¶ˆæ¯', 'warning');
                        return;
                    }
                    loadMessages();
                }
                if (key === 'ranking') {
                    loadRanking();
                }
                modals[key].style.display = 'block';
            });
        });

        // å…³é—­æ¨¡æ€æ¡†
        Object.keys(modalClosers).forEach(key => {
            modalClosers[key].forEach(closer => {
                closer.addEventListener('click', function() {
                    modals[key].style.display = 'none';
                });
            });
        });

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        window.addEventListener('click', function(e) {
            Object.values(modals).forEach(modal => {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });

        // æ³¨å†Œè¡¨å•æäº¤
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            const password = formData.get('password');
            const confirmPassword = formData.get('confirmPassword');
            
            if (password !== confirmPassword) {
                alert('ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´');
                return;
            }
            
            // æ¨¡æ‹Ÿæ³¨å†ŒæˆåŠŸ
            alert('æ³¨å†ŒæˆåŠŸï¼æ¬¢è¿åŠ å…¥å­¦ä¹ èµ„æ–™åˆ†äº«å¹³å°');
            modals.register.style.display = 'none';
            this.reset();
        });

        // ç™»å½•è¡¨å•æäº¤
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            
            // æ¨¡æ‹Ÿç™»å½•æˆåŠŸ
            alert('ç™»å½•æˆåŠŸï¼');
            modals.login.style.display = 'none';
            this.reset();
        });

        // ä»localStorageåŠ è½½èµ„æº
        function loadResources() {
            const savedResources = localStorage.getItem('resources');
            return savedResources ? JSON.parse(savedResources) : [];
        }

        // ä¿å­˜èµ„æºåˆ°localStorage
        function saveResources(resources) {
            localStorage.setItem('resources', JSON.stringify(resources));
        }

        // èµ„æ–™å­˜å‚¨æ•°ç»„
        let resources = loadResources();

        // æ–‡ä»¶é¢„è§ˆåŠŸèƒ½
        const uploadFileInput = document.getElementById('uploadFile');
        const filePreview = document.getElementById('filePreview');

        uploadFileInput.addEventListener('change', function() {
            filePreview.innerHTML = '';
            const files = this.files;
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const fileItem = document.createElement('div');
                fileItem.style.display = 'flex';
                fileItem.style.alignItems = 'center';
                fileItem.style.gap = '0.5rem';
                fileItem.style.padding = '0.5rem';
                fileItem.style.backgroundColor = '#f0f0f0';
                fileItem.style.borderRadius = '8px';
                fileItem.style.width = '100%';
                
                // æ–‡ä»¶å›¾æ ‡
                const fileIcon = document.createElement('span');
                const fileExtension = file.name.split('.').pop().toLowerCase();
                if (['pdf'].includes(fileExtension)) {
                    fileIcon.textContent = 'ğŸ“„';
                } else if (['doc', 'docx'].includes(fileExtension)) {
                    fileIcon.textContent = 'ğŸ“';
                } else if (['zip', 'rar'].includes(fileExtension)) {
                    fileIcon.textContent = 'ğŸ“¦';
                } else if (['mp4', 'mp3'].includes(fileExtension)) {
                    fileIcon.textContent = 'ğŸ¬';
                } else {
                    fileIcon.textContent = 'ğŸ“';
                }
                fileIcon.style.fontSize = '1.5rem';
                
                // æ–‡ä»¶ä¿¡æ¯
                const fileInfo = document.createElement('div');
                fileInfo.style.flex = '1';
                fileInfo.innerHTML = `
                    <div style="font-weight: 500; font-size: 0.9rem;">${file.name}</div>
                    <div style="font-size: 0.8rem; color: #666;">${(file.size / (1024 * 1024)).toFixed(2)} MB</div>
                `;
                
                fileItem.appendChild(fileIcon);
                fileItem.appendChild(fileInfo);
                filePreview.appendChild(fileItem);
            }
        });

        // åˆ›å»ºèµ„æ–™å¡ç‰‡
        function createResourceCard(resource) {
            const card = document.createElement('div');
            card.className = 'resource-card fade-in-up';
            
            // æ–‡ä»¶å›¾æ ‡
            const fileExtension = resource.fileName.split('.').pop().toLowerCase();
            let fileIcon = 'ğŸ“';
            if (['pdf'].includes(fileExtension)) {
                fileIcon = 'ğŸ“„';
            } else if (['doc', 'docx'].includes(fileExtension)) {
                fileIcon = 'ğŸ“';
            } else if (['zip', 'rar'].includes(fileExtension)) {
                fileIcon = 'ğŸ“¦';
            } else if (['mp4', 'mp3'].includes(fileExtension)) {
                fileIcon = 'ğŸ¬';
            }
            
            // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°
            function formatFileSize(bytes) {
                if (bytes < 1024) return bytes + ' B';
                else if (bytes < (1024 * 1024)) return (bytes / 1024).toFixed(1) + ' KB';
                else return (bytes / (1024 * 1024)).toFixed(2) + ' MB';
            }
            
            card.innerHTML = `
                <div class="resource-image">${fileIcon}</div>
                <div class="resource-content">
                    <span class="resource-category">${resource.category}</span>
                    <h3 class="resource-title">${resource.title}</h3>
                    <p class="resource-description">${resource.description}</p>
                    <div class="resource-meta">
                        <span>ğŸ“… ${resource.uploadDate}</span>
                        <span>ğŸ‘¤ åˆ†äº«è€…ï¼š${resource.uploader}</span>
                        <span>ğŸ“ ${formatFileSize(resource.fileSize)}</span>
                    </div>
                    <div class="resource-stats">
                        <span class="stat-item">ğŸ“¥ ä¸‹è½½ï¼š${resource.downloads}</span>
                        <span class="stat-item">â­ è¯„åˆ†ï¼š${resource.rating}</span>
                        <span class="stat-item">ğŸ’¬ è¯„è®ºï¼š${resource.comments}</span>
                    </div>
                    <div class="resource-actions">
                        <button class="action-btn favorite-btn" data-resource-id="${resource.id}">â¤ï¸ æ”¶è—</button>
                        <button class="action-btn follow-btn" data-user="${resource.uploader}">ğŸ‘¥ å…³æ³¨ä½œè€…</button>
                        <button class="action-btn share-btn" data-resource-id="${resource.id}">ğŸ“¤ åˆ†äº«</button>
                        <button class="action-btn report-btn" data-resource-id="${resource.id}">ğŸš« ä¸¾æŠ¥</button>
                    </div>
                    <div class="rating-section">
                        <div class="rating-stars">
                            ${Array(5).fill().map((_, i) => `<span class="star ${i < Math.floor(resource.rating) ? 'filled' : ''}" data-rating="${i + 1}">â˜…</span>`).join('')}
                        </div>
                        <span class="rating-text">${resource.rating.toFixed(1)}</span>
                    </div>
                    <div class="comments-section">
                        <button class="comment-btn" data-resource-id="${resource.id}">æŸ¥çœ‹è¯„è®º</button>
                        <div class="comment-form" style="margin-top: 1rem; display: none;">
                            <textarea placeholder="å†™ä¸‹ä½ çš„è¯„è®º..." class="comment-textarea"></textarea>
                            <button class="comment-submit" data-resource-id="${resource.id}">æäº¤è¯„è®º</button>
                        </div>
                        <div class="comments-list" style="margin-top: 1rem; display: none;"></div>
                    </div>
                    <div class="tags">
                        ${resource.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                    <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                        <button class="resource-button preview-btn" data-resource-id="${resource.id}">ğŸ‘ï¸ é¢„è§ˆ</button>
                        <button class="resource-button" data-resource-id="${resource.id}">å…è´¹ä¸‹è½½</button>
                    </div>
                </div>
            `;
            
            // æ·»åŠ ä¸‹è½½äº‹ä»¶
            card.querySelectorAll('.resource-button').forEach(button => {
                if (!button.classList.contains('preview-btn')) {
                    button.addEventListener('click', function() {
                        downloadResource(resource);
                    });
                }
            });
            
            // æ·»åŠ é¢„è§ˆäº‹ä»¶
            const previewBtn = card.querySelector('.preview-btn');
            if (previewBtn) {
                previewBtn.addEventListener('click', function() {
                    previewResource(resource);
                });
            }
            
            // æ·»åŠ æ”¶è—äº‹ä»¶
            const favoriteBtn = card.querySelector('.favorite-btn');
            favoriteBtn.addEventListener('click', function() {
                toggleFavorite(resource.id, this);
            });
            
            // æ·»åŠ å…³æ³¨äº‹ä»¶
            const followBtn = card.querySelector('.follow-btn');
            followBtn.addEventListener('click', function() {
                toggleFollow(resource.uploader, this);
            });
            
            // æ·»åŠ ä¸¾æŠ¥äº‹ä»¶
            const reportBtn = card.querySelector('.report-btn');
            reportBtn.addEventListener('click', function() {
                openReportModal(resource.id, resource.title);
            });
            
            // æ·»åŠ åˆ†äº«äº‹ä»¶
            const shareBtn = card.querySelector('.share-btn');
            shareBtn.addEventListener('click', function() {
                openShareModal(resource);
            });
            
            return card;
        }

        // ä¸‹è½½èµ„æ–™
        function downloadResource(resource) {
            showNotification(`æ­£åœ¨ä¸‹è½½ï¼š${resource.title}`, 'info');
            // æ¨¡æ‹Ÿä¸‹è½½è¿‡ç¨‹
            setTimeout(() => {
                showNotification(`ä¸‹è½½å®Œæˆï¼š${resource.title}`, 'success');
                // æ›´æ–°ä¸‹è½½æ¬¡æ•°
                resource.downloads++;
                updateResourceStats(resource);
                // ä¿å­˜èµ„æºåˆ°localStorage
                saveResources(resources);
                // å®é™…ä¸‹è½½åŠŸèƒ½
                // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„æ–‡ä»¶ä¸‹è½½é€»è¾‘ï¼Œä¾‹å¦‚åˆ›å»ºä¸‹è½½é“¾æ¥
                const downloadLink = document.createElement('a');
                downloadLink.href = URL.createObjectURL(new Blob(['æ¨¡æ‹Ÿæ–‡ä»¶å†…å®¹'], { type: resource.fileType }));
                downloadLink.download = resource.fileName;
                document.body.appendChild(downloadLink);
                downloadLink.click();
                document.body.removeChild(downloadLink);
            }, 1500);
        }

        // æ›´æ–°èµ„æ–™ç»Ÿè®¡ä¿¡æ¯
        function updateResourceStats(resource) {
            const cards = document.querySelectorAll('.resource-card');
            cards.forEach(card => {
                const button = card.querySelector('.resource-button');
                if (button.getAttribute('data-resource-id') === resource.id) {
                    const downloadStat = card.querySelector('.stat-item:nth-child(1)');
                    downloadStat.textContent = `ğŸ“¥ ä¸‹è½½ï¼š${resource.downloads}`;
                }
            });
        }

        // æ˜¾ç¤ºä¸Šä¼ çš„èµ„æ–™
        function displayUploadedResources() {
            // è·å–æ‰€æœ‰èµ„æºç½‘æ ¼
            const resourcesGrids = document.querySelectorAll('.resources-grid');
            if (resourcesGrids.length === 0) return;
            
            // æ¸…ç©ºæ‰€æœ‰èµ„æºç½‘æ ¼
            resourcesGrids.forEach(grid => {
                grid.innerHTML = '';
            });
            
            // æ·»åŠ æ‰€æœ‰èµ„æ–™å¡ç‰‡åˆ°ç¬¬ä¸€ä¸ªç½‘æ ¼
            const mainGrid = resourcesGrids[0];
            resources.forEach(resource => {
                const card = createResourceCard(resource);
                mainGrid.appendChild(card);
            });
            
            // æ›´æ–°ç»“æœè®¡æ•°
            document.getElementById('resultCount').textContent = resources.length;
        }

        // å°†æ–‡ä»¶è½¬æ¢ä¸ºBase64
        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });
        }

        // ä¸Šä¼ è¡¨å•æäº¤
        document.getElementById('uploadForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            
            // è·å–è¡¨å•æ•°æ®
            const title = formData.get('title');
            const category = formData.get('category');
            const description = formData.get('description');
            const tags = formData.get('tags').split(',').map(tag => tag.trim()).filter(tag => tag);
            const files = uploadFileInput.files;
            
            if (files.length === 0) {
                showNotification('è¯·é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶', 'error');
                return;
            }
            
            // æ˜¾ç¤ºè¿›åº¦æ¡
            const progressContainer = document.getElementById('uploadProgress');
            const progressBar = document.getElementById('progressBar');
            const progressPercent = document.getElementById('progressPercent');
            progressContainer.style.display = 'block';
            
            // å®é™…ä¸Šä¼ è¿‡ç¨‹
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                let progress = 0;
                const interval = setInterval(() => {
                    progress += 5;
                    if (progress > 90) {
                        progress = 90;
                    }
                    progressBar.style.width = `${progress}%`;
                    progressPercent.textContent = `${Math.round(progress)}%`;
                }, 100);
                
                try {
                    // å°†æ–‡ä»¶è½¬æ¢ä¸ºBase64
                    const fileData = await fileToBase64(file);
                    
                    // åˆ›å»ºèµ„æºå¯¹è±¡
                    const resource = {
                        id: Date.now() + i,
                        title: i > 0 ? `${title} (${i + 1})` : title,
                        category: category,
                        description: description,
                        fileName: file.name,
                        fileSize: file.size,
                        fileType: file.type,
                        fileData: fileData, // å®é™…çš„æ–‡ä»¶æ•°æ®ï¼ˆBase64ï¼‰
                        uploader: currentUser ? currentUser.username : 'åŒ¿åç”¨æˆ·',
                        uploadDate: new Date().toISOString().split('T')[0],
                        downloads: 0,
                        rating: 5.0,
                        comments: 0,
                        tags: tags
                    };
                    
                    // æ·»åŠ åˆ°èµ„æºæ•°ç»„
                    resources.push(resource);
                    
                    // ä¿å­˜èµ„æºåˆ°localStorage
                    saveResources(resources);
                    
                    // æ·»åŠ åˆ°ä¸Šä¼ å†å²è®°å½•
                    addToUploadHistory(resource);
                    
                    // æ›´æ–°è¿›åº¦åˆ°100%
                    clearInterval(interval);
                    progressBar.style.width = '100%';
                    progressPercent.textContent = '100%';
                } catch (error) {
                    clearInterval(interval);
                    showNotification(`æ–‡ä»¶ä¸Šä¼ å¤±è´¥ï¼š${file.name}`, 'error');
                    continue;
                }
            }
            
            // å»¶è¿Ÿå…³é—­è¿›åº¦æ¡
            setTimeout(() => {
                // æ˜¾ç¤ºæˆåŠŸé€šçŸ¥
                showNotification(`èµ„æ–™ä¸Šä¼ æˆåŠŸï¼å…±ä¸Šä¼  ${files.length} ä¸ªæ–‡ä»¶`, 'success');
                
                // æ›´æ–°èµ„æ–™æ˜¾ç¤º
                displayUploadedResources();
                
                // å…³é—­æ¨¡æ€æ¡†å¹¶é‡ç½®è¡¨å•
                modals.upload.style.display = 'none';
                this.reset();
                filePreview.innerHTML = '';
                progressContainer.style.display = 'none';
                progressBar.style.width = '0%';
                progressPercent.textContent = '0%';
            }, 500);
        });
        
        // ä¸‹è½½èµ„æ–™
        function downloadResource(resource) {
            showNotification(`æ­£åœ¨ä¸‹è½½ï¼š${resource.title}`, 'info');
            
            // ä»Base64è½¬æ¢ä¸ºBlob
            const base64ToBlob = (base64, contentType = '', sliceSize = 512) => {
                const byteCharacters = atob(base64.split(',')[1]);
                const byteArrays = [];
                
                for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {
                    const slice = byteCharacters.slice(offset, offset + sliceSize);
                    
                    const byteNumbers = new Array(slice.length);
                    for (let i = 0; i < slice.length; i++) {
                        byteNumbers[i] = slice.charCodeAt(i);
                    }
                    
                    const byteArray = new Uint8Array(byteNumbers);
                    byteArrays.push(byteArray);
                }
                
                return new Blob(byteArrays, { type: contentType });
            };
            
            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const blob = base64ToBlob(resource.fileData, resource.fileType);
            const downloadLink = document.createElement('a');
            downloadLink.href = URL.createObjectURL(blob);
            downloadLink.download = resource.fileName;
            document.body.appendChild(downloadLink);
            downloadLink.click();
            document.body.removeChild(downloadLink);
            
            // æ›´æ–°ä¸‹è½½æ¬¡æ•°
            resource.downloads++;
            updateResourceStats(resource);
            // ä¿å­˜èµ„æºåˆ°localStorage
            saveResources(resources);
            
            // æ·»åŠ åˆ°ä¸‹è½½å†å²è®°å½•
            addToDownloadHistory(resource);
            
            showNotification(`ä¸‹è½½å®Œæˆï¼š${resource.title}`, 'success');
        }

        // å›åˆ°é¡¶éƒ¨æŒ‰é’®
        const backToTopBtn = document.getElementById('backToTop');

        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                backToTopBtn.style.display = 'block';
            } else {
                backToTopBtn.style.display = 'none';
            }
        });

        backToTopBtn.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // é€šçŸ¥ç³»ç»ŸåŠŸèƒ½
        const notificationsContainer = document.createElement('div');
        notificationsContainer.id = 'notifications';
        document.body.appendChild(notificationsContainer);

        function showNotification(message, type = 'info', duration = 3000) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            // é€šçŸ¥å›¾æ ‡
            const icon = document.createElement('span');
            icon.className = 'notification-icon';
            switch (type) {
                case 'success':
                    icon.textContent = 'âœ…';
                    break;
                case 'error':
                    icon.textContent = 'âŒ';
                    break;
                case 'warning':
                    icon.textContent = 'âš ï¸';
                    break;
                default:
                    icon.textContent = 'â„¹ï¸';
            }
            
            // é€šçŸ¥å†…å®¹
            const content = document.createElement('div');
            content.className = 'notification-content';
            content.innerHTML = `
                <div class="notification-title">${type.charAt(0).toUpperCase() + type.slice(1)}</div>
                <div class="notification-message">${message}</div>
            `;
            
            // å…³é—­æŒ‰é’®
            const closeBtn = document.createElement('button');
            closeBtn.className = 'notification-close';
            closeBtn.textContent = 'Ã—';
            closeBtn.addEventListener('click', () => {
                removeNotification(notification);
            });
            
            notification.appendChild(icon);
            notification.appendChild(content);
            notification.appendChild(closeBtn);
            notificationsContainer.appendChild(notification);
            
            // è‡ªåŠ¨å…³é—­
            setTimeout(() => {
                removeNotification(notification);
            }, duration);
        }
        
        function removeNotification(notification) {
            notification.style.animation = 'slideInRight 0.3s ease reverse';
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 300);
        }
        
        // ç”¨æˆ·çŠ¶æ€ç®¡ç†
        let currentUser = null;
        
        // æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€
        function checkUserStatus() {
            const user = localStorage.getItem('currentUser');
            if (user) {
                currentUser = JSON.parse(user);
                updateUserInterface();
                updateMessageBadge();
            }
        }
        
        // æ›´æ–°ç”¨æˆ·ç•Œé¢
        function updateUserInterface() {
            const loginBtn = document.getElementById('loginBtn');
            const registerBtn = document.getElementById('registerBtn');
            const uploadBtn = document.getElementById('uploadBtn');
            
            if (currentUser) {
                // ç”¨æˆ·å·²ç™»å½•
                loginBtn.textContent = `æ¬¢è¿, ${currentUser.username}`;
                loginBtn.onclick = () => {
                    // æ˜¾ç¤ºç”¨æˆ·èœå•
                    showUserMenu();
                };
                registerBtn.textContent = 'æ³¨é”€';
                registerBtn.onclick = () => {
                    logout();
                };
                uploadBtn.style.display = 'inline-block'; // æ˜¾ç¤ºä¸Šä¼ æŒ‰é’®
            } else {
                // ç”¨æˆ·æœªç™»å½•
                loginBtn.textContent = 'ç™»å½•';
                loginBtn.onclick = () => {
                    modals.login.style.display = 'block';
                };
                registerBtn.textContent = 'æ³¨å†Œ';
                registerBtn.onclick = () => {
                    modals.register.style.display = 'block';
                };
                uploadBtn.style.display = 'none'; // éšè—ä¸Šä¼ æŒ‰é’®
            }
        }
        
        // æ˜¾ç¤ºç”¨æˆ·èœå•
        function showUserMenu() {
            // è¿™é‡Œå¯ä»¥æ·»åŠ ç”¨æˆ·èœå•çš„æ˜¾ç¤ºé€»è¾‘
            showNotification(`å½“å‰ç”¨æˆ·ï¼š${currentUser.username}`, 'info');
        }
        
        // æ³¨é”€åŠŸèƒ½
        function logout() {
            localStorage.removeItem('currentUser');
            currentUser = null;
            updateUserInterface();
            updateMessageBadge();
            showNotification('æ³¨é”€æˆåŠŸï¼', 'success');
        }
        
        // æ”¶è—åŠŸèƒ½
        function toggleFavorite(resourceId, button) {
            if (!currentUser) {
                showNotification('è¯·å…ˆç™»å½•åå†æ”¶è—', 'warning');
                return;
            }
            
            // è·å–ç”¨æˆ·æ”¶è—
            let favorites = JSON.parse(localStorage.getItem('favorites')) || {};
            if (!favorites[currentUser.id]) {
                favorites[currentUser.id] = [];
            }
            
            const index = favorites[currentUser.id].indexOf(resourceId);
            if (index > -1) {
                // å–æ¶ˆæ”¶è—
                favorites[currentUser.id].splice(index, 1);
                button.classList.remove('favorited');
                button.textContent = 'â¤ï¸ æ”¶è—';
                showNotification('å·²å–æ¶ˆæ”¶è—', 'info');
            } else {
                // æ·»åŠ æ”¶è—
                favorites[currentUser.id].push(resourceId);
                button.classList.add('favorited');
                button.textContent = 'â¤ï¸ å·²æ”¶è—';
                showNotification('æ”¶è—æˆåŠŸ', 'success');
            }
            
            // ä¿å­˜æ”¶è—
            localStorage.setItem('favorites', JSON.stringify(favorites));
        }
        
        // å…³æ³¨åŠŸèƒ½
        function toggleFollow(username, button) {
            if (!currentUser) {
                showNotification('è¯·å…ˆç™»å½•åå†å…³æ³¨', 'warning');
                return;
            }
            
            // è·å–ç”¨æˆ·å…³æ³¨
            let follows = JSON.parse(localStorage.getItem('follows')) || {};
            if (!follows[currentUser.id]) {
                follows[currentUser.id] = [];
            }
            
            const index = follows[currentUser.id].indexOf(username);
            if (index > -1) {
                // å–æ¶ˆå…³æ³¨
                follows[currentUser.id].splice(index, 1);
                button.classList.remove('followed');
                button.textContent = 'ğŸ‘¥ å…³æ³¨ä½œè€…';
                showNotification('å·²å–æ¶ˆå…³æ³¨', 'info');
            } else {
                // æ·»åŠ å…³æ³¨
                follows[currentUser.id].push(username);
                button.classList.add('followed');
                button.textContent = 'ğŸ‘¥ å·²å…³æ³¨';
                showNotification('å…³æ³¨æˆåŠŸ', 'success');
                
                // ç”Ÿæˆç³»ç»Ÿæ¶ˆæ¯
                generateSystemMessage(currentUser.id, `æ‚¨å·²æˆåŠŸå…³æ³¨äº†ä½œè€… "${username}"`);
            }
            
            // ä¿å­˜å…³æ³¨
            localStorage.setItem('follows', JSON.stringify(follows));
        }
        
        // æ¶ˆæ¯ç³»ç»Ÿ
        function getMessages() {
            return JSON.parse(localStorage.getItem('messages')) || {};
        }
        
        function saveMessages(messages) {
            localStorage.setItem('messages', JSON.stringify(messages));
        }
        
        function loadMessages() {
            if (!currentUser) return;
            
            const messages = getMessages();
            const userMessages = messages[currentUser.id] || [];
            const messagesContainer = document.getElementById('messagesContainer');
            
            messagesContainer.innerHTML = '';
            
            if (userMessages.length === 0) {
                messagesContainer.innerHTML = '<p style="text-align: center; color: #666; padding: 2rem;">æš‚æ— æ¶ˆæ¯</p>';
                return;
            }
            
            // æŒ‰æ—¶é—´å€’åºæ’åˆ—
            userMessages.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            userMessages.forEach(message => {
                const messageItem = document.createElement('div');
                messageItem.className = `message-item ${message.read ? '' : 'unread'}`;
                messageItem.innerHTML = `
                    <div class="message-header">
                        <span class="message-sender">${message.sender}</span>
                        <span class="message-date">${new Date(message.timestamp).toLocaleString()}</span>
                    </div>
                    <div class="message-content">${message.content}</div>
                    <div class="message-actions">
                        ${!message.read ? `<button class="message-action-btn" onclick="markMessageAsRead(${message.id})">æ ‡è®°å·²è¯»</button>` : ''}
                        <button class="message-action-btn" onclick="deleteMessage(${message.id})">åˆ é™¤</button>
                    </div>
                `;
                messagesContainer.appendChild(messageItem);
            });
            
            // æ›´æ–°æ¶ˆæ¯å¾½ç« 
            updateMessageBadge();
        }
        
        function markMessageAsRead(messageId) {
            if (!currentUser) return;
            
            const messages = getMessages();
            if (!messages[currentUser.id]) return;
            
            const message = messages[currentUser.id].find(m => m.id === messageId);
            if (message) {
                message.read = true;
                saveMessages(messages);
                loadMessages();
                showNotification('æ¶ˆæ¯å·²æ ‡è®°ä¸ºå·²è¯»', 'success');
            }
        }
        
        function markAllMessagesAsRead() {
            if (!currentUser) return;
            
            const messages = getMessages();
            if (!messages[currentUser.id]) return;
            
            messages[currentUser.id].forEach(message => {
                message.read = true;
            });
            
            saveMessages(messages);
            loadMessages();
            showNotification('æ‰€æœ‰æ¶ˆæ¯å·²æ ‡è®°ä¸ºå·²è¯»', 'success');
        }
        
        function deleteMessage(messageId) {
            if (!currentUser) return;
            
            const messages = getMessages();
            if (!messages[currentUser.id]) return;
            
            const index = messages[currentUser.id].findIndex(m => m.id === messageId);
            if (index > -1) {
                messages[currentUser.id].splice(index, 1);
                saveMessages(messages);
                loadMessages();
                showNotification('æ¶ˆæ¯å·²åˆ é™¤', 'info');
            }
        }
        
        function generateSystemMessage(userId, content) {
            const messages = getMessages();
            if (!messages[userId]) {
                messages[userId] = [];
            }
            
            const message = {
                id: Date.now(),
                sender: 'ç³»ç»Ÿé€šçŸ¥',
                content: content,
                timestamp: new Date().toISOString(),
                read: false
            };
            
            messages[userId].push(message);
            saveMessages(messages);
            
            // å¦‚æœå½“å‰ç”¨æˆ·å°±æ˜¯æ¶ˆæ¯æ¥æ”¶è€…ï¼Œæ›´æ–°å¾½ç« 
            if (currentUser && currentUser.id === userId) {
                updateMessageBadge();
            }
        }
        
        function updateMessageBadge() {
            if (!currentUser) {
                document.getElementById('messageBadge').textContent = '0';
                return;
            }
            
            const messages = getMessages();
            const userMessages = messages[currentUser.id] || [];
            const unreadCount = userMessages.filter(m => !m.read).length;
            
            document.getElementById('messageBadge').textContent = unreadCount;
        }
        
        // å‘é€æ¶ˆæ¯ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰
        function sendMessage(receiverId, content) {
            const messages = getMessages();
            if (!messages[receiverId]) {
                messages[receiverId] = [];
            }
            
            const message = {
                id: Date.now(),
                sender: currentUser.username,
                content: content,
                timestamp: new Date().toISOString(),
                read: false
            };
            
            messages[receiverId].push(message);
            saveMessages(messages);
        }
        
        // é«˜çº§æœç´¢åŠŸèƒ½
        function performAdvancedSearch() {
            const query = document.getElementById('advancedSearchQuery').value.toLowerCase();
            const category = document.getElementById('advancedSearchCategory').value;
            const tag = document.getElementById('advancedSearchTag').value.toLowerCase();
            const dateFrom = document.getElementById('dateFrom').value;
            const dateTo = document.getElementById('dateTo').value;
            const minRating = parseFloat(document.getElementById('advancedSearchRating').value);
            const minDownloads = parseInt(document.getElementById('advancedSearchDownloads').value);
            
            const allCards = document.querySelectorAll('.resource-card');
            let visibleCount = 0;
            
            allCards.forEach(card => {
                // è·å–å¡ç‰‡ä¿¡æ¯
                const cardTitle = card.querySelector('.resource-title').textContent.toLowerCase();
                const cardDesc = card.querySelector('.resource-description').textContent.toLowerCase();
                const cardCategory = card.querySelector('.resource-category').textContent;
                const cardTags = Array.from(card.querySelectorAll('.tag')).map(t => t.textContent.toLowerCase());
                const cardDate = card.querySelector('.resource-meta span:nth-child(1)').textContent.replace('ğŸ“… ', '');
                const cardRating = parseFloat(card.querySelector('.resource-stats span:nth-child(2)').textContent.replace('â­ è¯„åˆ†ï¼š', ''));
                const cardDownloads = parseInt(card.querySelector('.resource-stats span:nth-child(1)').textContent.replace('ğŸ“¥ ä¸‹è½½ï¼š', ''));
                
                // åº”ç”¨ç­›é€‰æ¡ä»¶
                let isMatch = true;
                
                // å…³é”®è¯ç­›é€‰
                if (query) {
                    const hasQueryMatch = cardTitle.includes(query) || cardDesc.includes(query);
                    if (!hasQueryMatch) isMatch = false;
                }
                
                // åˆ†ç±»ç­›é€‰
                if (category && cardCategory !== category) {
                    isMatch = false;
                }
                
                // æ ‡ç­¾ç­›é€‰
                if (tag && !cardTags.some(t => t.includes(tag))) {
                    isMatch = false;
                }
                
                // æ—¥æœŸèŒƒå›´ç­›é€‰
                if (dateFrom && new Date(cardDate) < new Date(dateFrom)) {
                    isMatch = false;
                }
                if (dateTo && new Date(cardDate) > new Date(dateTo)) {
                    isMatch = false;
                }
                
                // è¯„åˆ†ç­›é€‰
                if (minRating > 0 && cardRating < minRating) {
                    isMatch = false;
                }
                
                // ä¸‹è½½é‡ç­›é€‰
                if (minDownloads > 0 && cardDownloads < minDownloads) {
                    isMatch = false;
                }
                
                // æ˜¾ç¤ºæˆ–éšè—å¡ç‰‡
                if (isMatch) {
                    card.style.display = 'block';
                    card.style.animation = 'fadeInUp 0.6s ease forwards';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            // æ›´æ–°ç»“æœè®¡æ•°
            document.getElementById('resultCount').textContent = visibleCount;
            
            // é‡ç½®åˆ†ç±»å’Œæ ‡ç­¾çš„æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.category-card').forEach(c => c.classList.remove('active'));
            document.querySelector('.category-card:first-child').classList.add('active');
            document.querySelectorAll('.tag').forEach(tag => tag.classList.remove('active'));
            
            // å…³é—­æ¨¡æ€æ¡†
            modals.advancedSearch.style.display = 'none';
            
            // æ˜¾ç¤ºæœç´¢ç»“æœé€šçŸ¥
            showNotification(`é«˜çº§æœç´¢å®Œæˆï¼Œæ‰¾åˆ° ${visibleCount} ä¸ªç»“æœ`, 'success');
        }
        
        // è·å–ç”¨æˆ·æ•°æ®
        function getUsers() {
            return JSON.parse(localStorage.getItem('users')) || [];
        }
        
        // ä¿å­˜ç”¨æˆ·æ•°æ®
        function saveUsers(users) {
            localStorage.setItem('users', JSON.stringify(users));
        }
        
        // æ³¨å†Œè¡¨å•æäº¤
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            const username = formData.get('username');
            const email = formData.get('email');
            const password = formData.get('password');
            const confirmPassword = formData.get('confirmPassword');
            
            // è¡¨å•éªŒè¯
            if (password !== confirmPassword) {
                showNotification('ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´', 'error');
                return;
            }
            
            // æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
            const users = getUsers();
            if (users.some(user => user.username === username)) {
                showNotification('ç”¨æˆ·åå·²å­˜åœ¨', 'error');
                return;
            }
            
            // æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²å­˜åœ¨
            if (users.some(user => user.email === email)) {
                showNotification('é‚®ç®±å·²è¢«æ³¨å†Œ', 'error');
                return;
            }
            
            // åˆ›å»ºæ–°ç”¨æˆ·
            const newUser = {
                id: Date.now(),
                username: username,
                email: email,
                password: password, // å®é™…é¡¹ç›®ä¸­åº”è¯¥ä½¿ç”¨åŠ å¯†å­˜å‚¨
                createdAt: new Date().toISOString()
            };
            
            // ä¿å­˜ç”¨æˆ·
            users.push(newUser);
            saveUsers(users);
            
            // è‡ªåŠ¨ç™»å½•
            localStorage.setItem('currentUser', JSON.stringify(newUser));
            currentUser = newUser;
            
            // æ›´æ–°ç•Œé¢
            updateUserInterface();
            updateMessageBadge();
            
            showNotification('æ³¨å†ŒæˆåŠŸï¼æ¬¢è¿åŠ å…¥å­¦ä¹ èµ„æ–™åˆ†äº«å¹³å°', 'success');
            generateSystemMessage(newUser.id, 'æ¬¢è¿æ³¨å†Œå­¦ä¹ èµ„æ–™åˆ†äº«å¹³å°ï¼æ‚¨å¯ä»¥å¼€å§‹ä¸Šä¼ å’Œä¸‹è½½å­¦ä¹ èµ„æ–™äº†ã€‚');
            modals.register.style.display = 'none';
            this.reset();
        });
        
        // ç™»å½•è¡¨å•æäº¤
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            const email = formData.get('email');
            const password = formData.get('password');
            
            // æ£€æŸ¥ç”¨æˆ·
            const users = getUsers();
            const user = users.find(user => user.email === email && user.password === password);
            
            if (user) {
                // ç™»å½•æˆåŠŸ
                localStorage.setItem('currentUser', JSON.stringify(user));
                currentUser = user;
                updateUserInterface();
                updateMessageBadge();
                showNotification('ç™»å½•æˆåŠŸï¼', 'success');
                generateSystemMessage(user.id, 'æ¬¢è¿å›æ¥ï¼æ‚¨æœ‰æ–°çš„æ¶ˆæ¯å—ï¼Ÿ');
                modals.login.style.display = 'none';
                this.reset();
            } else {
                // ç™»å½•å¤±è´¥
                showNotification('é‚®ç®±æˆ–å¯†ç é”™è¯¯', 'error');
            }
        });
        
        // æ›´æ–°ä¸ªäººèµ„æ–™
        document.getElementById('updateProfileBtn').addEventListener('click', function() {
            if (!currentUser) {
                showNotification('è¯·å…ˆç™»å½•åæ›´æ–°ä¸ªäººèµ„æ–™', 'warning');
                return;
            }
            
            // è·å–ä¸ªäººç®€ä»‹
            const bio = document.getElementById('profileBio').value;
            
            // æ›´æ–°ç”¨æˆ·æ•°æ®
            currentUser.bio = bio;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            // æ›´æ–°ç”¨æˆ·æ•°æ®åˆ°ç”¨æˆ·åˆ—è¡¨
            const users = getUsers();
            const userIndex = users.findIndex(user => user.id === currentUser.id);
            if (userIndex !== -1) {
                users[userIndex].bio = bio;
                saveUsers(users);
            }
            
            showNotification('ä¸ªäººèµ„æ–™æ›´æ–°æˆåŠŸ', 'success');
            generateSystemMessage(currentUser.id, 'æ‚¨çš„ä¸ªäººèµ„æ–™å·²æˆåŠŸæ›´æ–°');
        });
        
        // æ ‡è®°å…¨éƒ¨å·²è¯»æŒ‰é’®äº‹ä»¶
        document.getElementById('markAllReadBtn').addEventListener('click', function() {
            markAllMessagesAsRead();
        });
        
        // é«˜çº§æœç´¢è¡¨å•æäº¤
        document.getElementById('advancedSearchForm').addEventListener('submit', function(e) {
            e.preventDefault();
            performAdvancedSearch();
        });
        
        // æŸ¥çœ‹ä¸‹è½½å†å²æŒ‰é’®äº‹ä»¶
        document.getElementById('viewDownloadHistoryBtn').addEventListener('click', function() {
            if (!currentUser) {
                showNotification('è¯·å…ˆç™»å½•åæŸ¥çœ‹ä¸‹è½½å†å²', 'warning');
                return;
            }
            loadDownloadHistory();
            modals.downloadHistory.style.display = 'block';
        });
        
        // æŸ¥çœ‹ä¸Šä¼ å†å²æŒ‰é’®äº‹ä»¶
        document.getElementById('viewUploadHistoryBtn').addEventListener('click', function() {
            if (!currentUser) {
                showNotification('è¯·å…ˆç™»å½•åæŸ¥çœ‹ä¸Šä¼ å†å²', 'warning');
                return;
            }
            loadUploadHistory();
            modals.uploadHistory.style.display = 'block';
        });
        
        // æ¸…ç©ºä¸‹è½½å†å²æŒ‰é’®äº‹ä»¶
        document.getElementById('clearDownloadHistoryBtn').addEventListener('click', function() {
            clearDownloadHistory();
        });
        
        // æ¸…ç©ºä¸Šä¼ å†å²æŒ‰é’®äº‹ä»¶
        document.getElementById('clearUploadHistoryBtn').addEventListener('click', function() {
            clearUploadHistory();
        });

        // ä¸¾æŠ¥åŠŸèƒ½
        let currentReportResourceId = null;
        
        function openReportModal(resourceId, resourceTitle) {
            if (!currentUser) {
                showNotification('è¯·å…ˆç™»å½•åå†ä¸¾æŠ¥èµ„æ–™', 'warning');
                return;
            }
            
            currentReportResourceId = resourceId;
            document.getElementById('reportResourceId').value = resourceId;
            document.getElementById('reportReason').value = '';
            document.getElementById('reportDescription').value = '';
            
            // æ›´æ–°æ¨¡æ€æ¡†æ ‡é¢˜ï¼Œæ˜¾ç¤ºè¢«ä¸¾æŠ¥çš„èµ„æ–™åç§°
            modals.report.querySelector('.modal-header h2').textContent = `ğŸš« ä¸¾æŠ¥èµ„æ–™ - ${resourceTitle}`;
            
            modals.report.style.display = 'block';
        }
        
        function getReports() {
            return JSON.parse(localStorage.getItem('reports')) || {};
        }
        
        function saveReports(reports) {
            localStorage.setItem('reports', JSON.stringify(reports));
        }
        
        function addToReportHistory(report) {
            if (!currentUser) return;
            
            let reportHistory = JSON.parse(localStorage.getItem('reportHistory')) || {};
            if (!reportHistory[currentUser.id]) {
                reportHistory[currentUser.id] = [];
            }
            
            reportHistory[currentUser.id].unshift(report);
            
            // é™åˆ¶å†å²è®°å½•æ•°é‡ä¸º50æ¡
            if (reportHistory[currentUser.id].length > 50) {
                reportHistory[currentUser.id] = reportHistory[currentUser.id].slice(0, 50);
            }
            
            localStorage.setItem('reportHistory', JSON.stringify(reportHistory));
        }
        
        function loadReportHistory() {
            if (!currentUser) {
                showNotification('è¯·å…ˆç™»å½•åæŸ¥çœ‹ä¸¾æŠ¥è®°å½•', 'warning');
                return;
            }
            
            const reportHistory = JSON.parse(localStorage.getItem('reportHistory')) || {};
            const userReports = reportHistory[currentUser.id] || [];
            const reportHistoryContent = document.getElementById('reportHistoryContent');
            
            if (userReports.length === 0) {
                reportHistoryContent.innerHTML = '<p style="text-align: center; color: #666; padding: 2rem;">æš‚æ— ä¸¾æŠ¥è®°å½•</p>';
                return;
            }
            
            reportHistoryContent.innerHTML = `
                <table style="width: 100%; border-collapse: collapse; margin-bottom: 1rem;">
                    <thead>
                        <tr style="background: #f0f0f0; text-align: left;">
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">èµ„æ–™åç§°</th>
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">ä¸¾æŠ¥åŸå› </th>
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">ä¸¾æŠ¥æ—¶é—´</th>
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">çŠ¶æ€</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${userReports.map(report => `
                            <tr style="border-bottom: 1px solid #e0e0e0;">
                                <td style="padding: 1rem;">${report.resourceTitle}</td>
                                <td style="padding: 1rem;">${getReportReasonText(report.reason)}</td>
                                <td style="padding: 1rem;">${new Date(report.reportDate).toLocaleString()}</td>
                                <td style="padding: 1rem;">
                                    <span style="padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.8rem; font-weight: 600;
                                        ${report.status === 'pending' ? 'background: #ffeb3b; color: #333;' : 
                                          report.status === 'processed' ? 'background: #4caf50; color: white;' : 
                                          'background: #f44336; color: white;'}">
                                        ${getStatusText(report.status)}
                                    </span>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                <div style="text-align: right; margin-top: 1rem;">
                    <p style="color: #666; font-size: 0.9rem;">å…± ${userReports.length} æ¡è®°å½•</p>
                </div>
            `;
        }
        
        function getReportReasonText(reason) {
            const reasons = {
                spam: 'åƒåœ¾ä¿¡æ¯',
                inappropriate: 'ä¸å½“å†…å®¹',
                copyright: 'ç‰ˆæƒä¾µçŠ¯',
                duplicate: 'é‡å¤èµ„æ–™',
                other: 'å…¶ä»–åŸå› '
            };
            return reasons[reason] || reason;
        }
        
        function getStatusText(status) {
            const statuses = {
                pending: 'å¤„ç†ä¸­',
                processed: 'å·²å¤„ç†',
                rejected: 'é©³å›'
            };
            return statuses[status] || status;
        }
        
        // ä¸¾æŠ¥è¡¨å•æäº¤
        document.getElementById('reportForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!currentUser || !currentReportResourceId) return;
            
            const reason = document.getElementById('reportReason').value;
            const description = document.getElementById('reportDescription').value;
            
            if (!reason || !description) {
                showNotification('è¯·å¡«å†™å®Œæ•´çš„ä¸¾æŠ¥ä¿¡æ¯', 'error');
                return;
            }
            
            // è·å–è¢«ä¸¾æŠ¥çš„èµ„æºä¿¡æ¯
            const resource = resources.find(r => r.id === currentReportResourceId);
            if (!resource) {
                showNotification('èµ„æºä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤', 'error');
                return;
            }
            
            // åˆ›å»ºä¸¾æŠ¥å¯¹è±¡
            const report = {
                id: Date.now(),
                resourceId: currentReportResourceId,
                resourceTitle: resource.title,
                reason: reason,
                description: description,
                reporterId: currentUser.id,
                reporterName: currentUser.username,
                reportDate: new Date().toISOString(),
                status: 'pending'
            };
            
            // ä¿å­˜ä¸¾æŠ¥
            const reports = getReports();
            if (!reports[resource.id]) {
                reports[resource.id] = [];
            }
            reports[resource.id].push(report);
            saveReports(reports);
            
            // æ·»åŠ åˆ°ä¸¾æŠ¥å†å²
            addToReportHistory(report);
            
            // æ˜¾ç¤ºæˆåŠŸé€šçŸ¥
            showNotification('ä¸¾æŠ¥æˆåŠŸï¼Œæˆ‘ä»¬ä¼šå°½å¿«å¤„ç†', 'success');
            
            // å…³é—­æ¨¡æ€æ¡†
            modals.report.style.display = 'none';
            
            // ç”Ÿæˆç³»ç»Ÿæ¶ˆæ¯
            generateSystemMessage(currentUser.id, `æ‚¨çš„ä¸¾æŠ¥å·²æäº¤ï¼Œæˆ‘ä»¬ä¼šå°½å¿«å¤„ç†ã€‚ä¸¾æŠ¥å†…å®¹ï¼š${resource.title}`);
        });
        
        // æŸ¥çœ‹ä¸¾æŠ¥å†å²æŒ‰é’®äº‹ä»¶
        function viewReportHistory() {
            if (!currentUser) {
                showNotification('è¯·å…ˆç™»å½•åæŸ¥çœ‹ä¸¾æŠ¥è®°å½•', 'warning');
                return;
            }
            loadReportHistory();
            modals.reportHistory.style.display = 'block';
        }

        // åˆ†äº«åŠŸèƒ½
        let currentShareResource = null;
        
        function openShareModal(resource) {
            currentShareResource = resource;
            
            // æ›´æ–°åˆ†äº«æ¨¡æ€æ¡†ä¸­çš„èµ„æ–™ä¿¡æ¯
            document.getElementById('shareResourceTitle').textContent = resource.title;
            document.getElementById('shareResourceDescription').textContent = resource.description;
            
            // ç”Ÿæˆåˆ†äº«é“¾æ¥
            const shareLink = generateShareLink(resource);
            document.getElementById('shareLink').value = shareLink;
            
            modals.share.style.display = 'block';
        }
        
        function generateShareLink(resource) {
            // ç”Ÿæˆåˆ†äº«é“¾æ¥ï¼ŒåŒ…å«èµ„æºIDå’Œæ ‡é¢˜
            const baseUrl = window.location.origin + window.location.pathname;
            const encodedTitle = encodeURIComponent(resource.title);
            return `${baseUrl}?share=${resource.id}&title=${encodedTitle}`;
        }
        
        function shareToSocial(platform) {
            if (!currentShareResource) return;
            
            const shareLink = generateShareLink(currentShareResource);
            const title = currentShareResource.title;
            const description = currentShareResource.description;
            
            switch (platform) {
                case 'weixin':
                    showNotification('è¯·ä½¿ç”¨å¾®ä¿¡æ‰«æäºŒç»´ç åˆ†äº«', 'info');
                    // è¿™é‡Œå¯ä»¥ç”ŸæˆäºŒç»´ç 
                    break;
                case 'weibo':
                    const weiboUrl = `http://service.weibo.com/share/share.php?url=${encodeURIComponent(shareLink)}&title=${encodeURIComponent(title)}&content=${encodeURIComponent(description)}`;
                    window.open(weiboUrl, '_blank', 'width=600,height=400');
                    break;
                case 'qq':
                    const qqUrl = `https://connect.qq.com/widget/shareqq/index.html?url=${encodeURIComponent(shareLink)}&title=${encodeURIComponent(title)}&summary=${encodeURIComponent(description)}`;
                    window.open(qqUrl, '_blank', 'width=600,height=400');
                    break;
                case 'linkedin':
                    const linkedinUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(shareLink)}`;
                    window.open(linkedinUrl, '_blank', 'width=600,height=400');
                    break;
                case 'copy':
                    copyShareLink();
                    break;
            }
        }
        
        function copyShareLink() {
            const shareLinkInput = document.getElementById('shareLink');
            shareLinkInput.select();
            shareLinkInput.setSelectionRange(0, 99999); // æ”¯æŒç§»åŠ¨è®¾å¤‡
            
            try {
                document.execCommand('copy');
                showNotification('åˆ†äº«é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');
            } catch (err) {
                showNotification('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶', 'error');
            }
        }
        
        // æ£€æŸ¥URLä¸­çš„åˆ†äº«å‚æ•°ï¼Œç”¨äºå¤„ç†åˆ†äº«é“¾æ¥
        function checkShareParam() {
            const urlParams = new URLSearchParams(window.location.search);
            const shareId = urlParams.get('share');
            
            if (shareId) {
                // æ‰¾åˆ°å¯¹åº”çš„èµ„æº
                const resource = resources.find(r => r.id === parseInt(shareId));
                if (resource) {
                    showNotification(`è¿™æ˜¯åˆ†äº«çš„èµ„æ–™ï¼š${resource.title}`, 'info');
                    // è¿™é‡Œå¯ä»¥è‡ªåŠ¨æ‰“å¼€èµ„æºé¢„è§ˆæˆ–è·³è½¬åˆ°èµ„æºé¡µé¢
                }
            }
        }

        // æ’è¡Œæ¦œåŠŸèƒ½
        function loadRanking() {
            loadContributionRanking();
            loadPopularRanking();
        }
        
        function previewResourceById(resourceId) {
            const resource = resources.find(r => r.id === resourceId);
            if (resource) {
                previewResource(resource);
            } else {
                showNotification('èµ„æºä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤', 'error');
            }
        }
        
        function loadContributionRanking() {
            // è®¡ç®—ç”¨æˆ·è´¡çŒ®å€¼ï¼ˆä¸Šä¼ èµ„æ–™æ•°é‡ï¼‰
            const userContributions = {};
            
            resources.forEach(resource => {
                if (!userContributions[resource.uploader]) {
                    userContributions[resource.uploader] = 0;
                }
                userContributions[resource.uploader]++;
            });
            
            // è½¬æ¢ä¸ºæ•°ç»„å¹¶æ’åº
            const sortedContributions = Object.entries(userContributions)
                .map(([username, count]) => ({ username, count }))
                .sort((a, b) => b.count - a.count)
                .slice(0, 10); // åªæ˜¾ç¤ºå‰10å
            
            const contributionContainer = document.getElementById('contributionRanking');
            
            if (sortedContributions.length === 0) {
                contributionContainer.innerHTML = '<p style="text-align: center; color: #666; padding: 2rem;">æš‚æ— è´¡çŒ®è®°å½•</p>';
                return;
            }
            
            contributionContainer.innerHTML = `
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: #f0f0f0; text-align: left;">
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">æ’å</th>
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">ç”¨æˆ·</th>
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">è´¡çŒ®æ•°é‡</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${sortedContributions.map((item, index) => `
                            <tr style="border-bottom: 1px solid #e0e0e0;">
                                <td style="padding: 1rem; font-weight: 600;">
                                    <span style="display: inline-block; width: 24px; height: 24px; line-height: 24px; text-align: center; border-radius: 50%; margin-right: 0.5rem;
                                        ${index === 0 ? 'background: #ffd700; color: white;' : 
                                          index === 1 ? 'background: #c0c0c0; color: white;' : 
                                          index === 2 ? 'background: #cd7f32; color: white;' : 
                                          'background: #f0f0f0; color: #333;'};">
                                        ${index + 1}
                                    </span>
                                </td>
                                <td style="padding: 1rem;">${item.username}</td>
                                <td style="padding: 1rem;">${item.count} ä¸ªèµ„æ–™</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
        }
        
        function loadPopularRanking() {
            // æŒ‰ä¸‹è½½é‡æ’åºèµ„æ–™
            const sortedResources = [...resources]
                .sort((a, b) => b.downloads - a.downloads)
                .slice(0, 10); // åªæ˜¾ç¤ºå‰10å
            
            const popularContainer = document.getElementById('popularRanking');
            
            if (sortedResources.length === 0) {
                popularContainer.innerHTML = '<p style="text-align: center; color: #666; padding: 2rem;">æš‚æ— çƒ­é—¨èµ„æ–™</p>';
                return;
            }
            
            popularContainer.innerHTML = `
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: #f0f0f0; text-align: left;">
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">æ’å</th>
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">èµ„æ–™åç§°</th>
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">ä¸‹è½½é‡</th>
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${sortedResources.map((resource, index) => `
                            <tr style="border-bottom: 1px solid #e0e0e0;">
                                <td style="padding: 1rem; font-weight: 600;">
                                    <span style="display: inline-block; width: 24px; height: 24px; line-height: 24px; text-align: center; border-radius: 50%; margin-right: 0.5rem;
                                        ${index === 0 ? 'background: #ffd700; color: white;' : 
                                          index === 1 ? 'background: #c0c0c0; color: white;' : 
                                          index === 2 ? 'background: #cd7f32; color: white;' : 
                                          'background: #f0f0f0; color: #333;'};">
                                        ${index + 1}
                                    </span>
                                </td>
                                <td style="padding: 1rem;">${resource.title}</td>
                                <td style="padding: 1rem;">${resource.downloads}</td>
                                <td style="padding: 1rem;">
                                    <button class="form-btn form-btn-primary" style="padding: 0.3rem 0.8rem; font-size: 0.8rem;" onclick="previewResourceById(${resource.id})">é¢„è§ˆ</button>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
        }

        // å­¦ä¹ è·¯å¾„åŠŸèƒ½
        function openLearningPathModal() {
            modals.learningPath.style.display = 'block';
        }
        
        function generateLearningPath() {
            const category = document.getElementById('learningPathCategory').value;
            if (!category) {
                showNotification('è¯·é€‰æ‹©å­¦ä¹ é¢†åŸŸ', 'warning');
                return;
            }
            
            // æ ¹æ®é€‰æ‹©çš„åˆ†ç±»ç”Ÿæˆå­¦ä¹ è·¯å¾„
            const pathContent = document.getElementById('learningPathContent');
            
            // æ¸…ç©ºä¹‹å‰çš„å†…å®¹
            pathContent.innerHTML = '';
            
            // æ¨¡æ‹Ÿå­¦ä¹ è·¯å¾„æ•°æ®
            const learningPaths = {
                'ç¼–ç¨‹å¼€å‘': [
                    { title: 'ç¼–ç¨‹åŸºç¡€', description: 'äº†è§£ç¼–ç¨‹æ¦‚å¿µå’ŒåŸºæœ¬è¯­æ³•', resources: ['Pythonä»å…¥é—¨åˆ°ç²¾é€š', 'ç®—æ³•ä¸æ•°æ®ç»“æ„'] },
                    { title: 'Webå¼€å‘', description: 'å­¦ä¹ å‰ç«¯å’Œåç«¯å¼€å‘æŠ€æœ¯', resources: ['HTML/CSSåŸºç¡€', 'JavaScripté«˜çº§ç¼–ç¨‹'] },
                    { title: 'ç§»åŠ¨å¼€å‘', description: 'å¼€å‘ç§»åŠ¨åº”ç”¨ç¨‹åº', resources: ['React Nativeå…¥é—¨', 'Flutterå®æˆ˜'] },
                    { title: 'DevOps', description: 'å­¦ä¹ å¼€å‘è¿ç»´ä¸€ä½“åŒ–', resources: ['Dockerå®¹å™¨æŠ€æœ¯', 'CI/CDå®è·µ'] }
                ],
                'æ•°æ®åˆ†æ': [
                    { title: 'æ•°æ®åŸºç¡€', description: 'äº†è§£æ•°æ®æ¦‚å¿µå’Œåˆ†ææ–¹æ³•', resources: ['æ•°æ®åˆ†æå®æˆ˜æŒ‡å—', 'ç»Ÿè®¡å­¦åŸºç¡€'] },
                    { title: 'æ•°æ®å¤„ç†', description: 'å­¦ä¹ æ•°æ®æ¸…æ´—å’Œå¤„ç†æŠ€æœ¯', resources: ['Pandasæ•°æ®åˆ†æ', 'SQLæ•°æ®åº“'] },
                    { title: 'æ•°æ®å¯è§†åŒ–', description: 'å­¦ä¹ æ•°æ®å±•ç¤ºå’Œå¯è§†åŒ–', resources: ['Matplotlibå®è·µ', 'Tableauå…¥é—¨'] },
                    { title: 'æœºå™¨å­¦ä¹ ', description: 'åº”ç”¨æœºå™¨å­¦ä¹ ç®—æ³•è¿›è¡Œåˆ†æ', resources: ['æœºå™¨å­¦ä¹ åŸºç¡€æ•™ç¨‹', 'Scikit-learnå®è·µ'] }
                ],
                'è®¾è®¡åˆ›æ„': [
                    { title: 'è®¾è®¡åŸºç¡€', description: 'äº†è§£è®¾è®¡åŸç†å’Œç¾å­¦', resources: ['è®¾è®¡æ€ç»´å…¥é—¨', 'è‰²å½©ç†è®ºåŸºç¡€'] },
                    { title: 'å¹³é¢è®¾è®¡', description: 'å­¦ä¹ å¹³é¢è®¾è®¡æŠ€æœ¯', resources: ['PhotoshopåŸºç¡€', 'Illustratorå®æˆ˜'] },
                    { title: 'UI/UXè®¾è®¡', description: 'å­¦ä¹ ç”¨æˆ·ç•Œé¢å’Œä½“éªŒè®¾è®¡', resources: ['Figmaè®¾è®¡å·¥å…·', 'ç”¨æˆ·ä½“éªŒè®¾è®¡'] },
                    { title: '3Dè®¾è®¡', description: 'å­¦ä¹ ä¸‰ç»´è®¾è®¡æŠ€æœ¯', resources: ['Blenderå…¥é—¨', '3Då»ºæ¨¡å®æˆ˜'] }
                ],
                'è¯­è¨€å­¦ä¹ ': [
                    { title: 'åŸºç¡€å…¥é—¨', description: 'å­¦ä¹ è¯­è¨€åŸºç¡€çŸ¥è¯†', resources: ['è‹±è¯­è¯­æ³•å¤§å…¨', 'å‘éŸ³è®­ç»ƒ'] },
                    { title: 'è¯æ±‡ç§¯ç´¯', description: 'æ‰©å¤§è¯æ±‡é‡', resources: ['å¸¸ç”¨è¯æ±‡æ‰‹å†Œ', 'è¯æ±‡è®°å¿†æ–¹æ³•'] },
                    { title: 'å¬è¯´è®­ç»ƒ', description: 'æé«˜å¬è¯´èƒ½åŠ›', resources: ['å¬åŠ›è®­ç»ƒ', 'å£è¯­å®è·µ'] },
                    { title: 'é˜…è¯»å†™ä½œ', description: 'æé«˜é˜…è¯»å’Œå†™ä½œèƒ½åŠ›', resources: ['é˜…è¯»æŠ€å·§', 'å†™ä½œæŒ‡å—'] }
                ],
                'å¸‚åœºè¥é”€': [
                    { title: 'è¥é”€åŸºç¡€', description: 'äº†è§£å¸‚åœºè¥é”€æ¦‚å¿µ', resources: ['å¸‚åœºè¥é”€åŸç†', 'æ¶ˆè´¹è€…è¡Œä¸ºå­¦'] },
                    { title: 'æ•°å­—è¥é”€', description: 'å­¦ä¹ æ•°å­—è¥é”€æŠ€æœ¯', resources: ['SEOä¼˜åŒ–', 'ç¤¾äº¤åª’ä½“è¥é”€'] },
                    { title: 'å†…å®¹è¥é”€', description: 'å­¦ä¹ å†…å®¹åˆ›ä½œå’Œæ¨å¹¿', resources: ['å†…å®¹è¥é”€æŒ‡å—', 'æ–‡æ¡ˆå†™ä½œæŠ€å·§'] },
                    { title: 'å“ç‰Œç®¡ç†', description: 'å­¦ä¹ å“ç‰Œå»ºè®¾å’Œç®¡ç†', resources: ['å“ç‰Œæˆ˜ç•¥', 'å“ç‰Œå®šä½'] }
                ],
                'æ•™è‚²æ•™å­¦': [
                    { title: 'æ•™è‚²ç†è®º', description: 'äº†è§£æ•™è‚²æ•™å­¦ç†è®º', resources: ['æ•™è‚²å­¦åŸºç¡€', 'å¿ƒç†å­¦åŸç†'] },
                    { title: 'æ•™å­¦æ–¹æ³•', description: 'å­¦ä¹ æ•™å­¦æ–¹æ³•å’ŒæŠ€å·§', resources: ['é«˜æ•ˆæ•™å­¦æ–¹æ³•', 'è¯¾å ‚ç®¡ç†'] },
                    { title: 'è¯¾ç¨‹è®¾è®¡', description: 'å­¦ä¹ è¯¾ç¨‹è®¾è®¡å’Œå¼€å‘', resources: ['è¯¾ç¨‹è®¾è®¡æŒ‡å—', 'æ•™æ¡ˆç¼–å†™'] },
                    { title: 'æ•™è‚²æŠ€æœ¯', description: 'å­¦ä¹ æ•™è‚²æŠ€æœ¯åº”ç”¨', resources: ['æ•™è‚²æŠ€æœ¯åŸºç¡€', 'åœ¨çº¿æ•™è‚²å¹³å°'] }
                ],
                'äººå·¥æ™ºèƒ½': [
                    { title: 'AIåŸºç¡€', description: 'äº†è§£äººå·¥æ™ºèƒ½æ¦‚å¿µ', resources: ['äººå·¥æ™ºèƒ½å¯¼è®º', 'æœºå™¨å­¦ä¹ åŸºç¡€æ•™ç¨‹'] },
                    { title: 'æ·±åº¦å­¦ä¹ ', description: 'å­¦ä¹ æ·±åº¦å­¦ä¹ æŠ€æœ¯', resources: ['ç¥ç»ç½‘ç»œåŸºç¡€', 'TensorFlowå®è·µ'] },
                    { title: 'è‡ªç„¶è¯­è¨€å¤„ç†', description: 'å­¦ä¹ NLPæŠ€æœ¯', resources: ['NLPåŸºç¡€', 'æƒ…æ„Ÿåˆ†æå®è·µ'] },
                    { title: 'è®¡ç®—æœºè§†è§‰', description: 'å­¦ä¹ è®¡ç®—æœºè§†è§‰æŠ€æœ¯', resources: ['å›¾åƒå¤„ç†åŸºç¡€', 'ç›®æ ‡æ£€æµ‹'] }
                ],
                'ç½‘ç»œå®‰å…¨': [
                    { title: 'å®‰å…¨åŸºç¡€', description: 'äº†è§£ç½‘ç»œå®‰å…¨æ¦‚å¿µ', resources: ['ç½‘ç»œå®‰å…¨å¯¼è®º', 'å®‰å…¨æ„è¯†åŸ¹è®­'] },
                    { title: 'ç½‘ç»œé˜²æŠ¤', description: 'å­¦ä¹ ç½‘ç»œé˜²æŠ¤æŠ€æœ¯', resources: ['é˜²ç«å¢™é…ç½®', 'å…¥ä¾µæ£€æµ‹'] },
                    { title: 'ç³»ç»Ÿå®‰å…¨', description: 'å­¦ä¹ ç³»ç»Ÿå®‰å…¨æŠ€æœ¯', resources: ['æ“ä½œç³»ç»Ÿå®‰å…¨', 'æ¼æ´æ‰«æ'] },
                    { title: 'åŠ å¯†æŠ€æœ¯', description: 'å­¦ä¹ åŠ å¯†æŠ€æœ¯åº”ç”¨', resources: ['å¯†ç å­¦åŸºç¡€', 'SSL/TLSåŸç†'] }
                ]
            };
            
            const path = learningPaths[category];
            if (!path) {
                showNotification('æš‚æ— è¯¥é¢†åŸŸçš„å­¦ä¹ è·¯å¾„', 'info');
                return;
            }
            
            // ç”Ÿæˆå­¦ä¹ è·¯å¾„HTML
            let pathHTML = `
                <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px; margin-bottom: 2rem;">
                    <h3 style="color: #667eea; margin-bottom: 1rem;">${category}å­¦ä¹ è·¯å¾„</h3>
                    <p style="color: #666;">ä»¥ä¸‹æ˜¯ä¸ºæ‚¨å®šåˆ¶çš„å­¦ä¹ è·¯å¾„ï¼ŒæŒ‰ç…§ä»åŸºç¡€åˆ°é«˜çº§çš„é¡ºåºæ’åˆ—</p>
                </div>
            `;
            
            path.forEach((step, index) => {
                pathHTML += `
                    <div style="background: white; border: 1px solid #e0e0e0; border-radius: 10px; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                        <div style="display: flex; align-items: center; margin-bottom: 1rem;">
                            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 1rem;">
                                ${index + 1}
                            </div>
                            <h4 style="font-size: 1.2rem; font-weight: 600; color: #333;">${step.title}</h4>
                        </div>
                        <p style="color: #666; margin-bottom: 1rem; margin-left: 40px;">${step.description}</p>
                        <div style="margin-left: 40px;">
                            <h5 style="font-weight: 600; color: #667eea; margin-bottom: 0.5rem;">æ¨èèµ„æºï¼š</h5>
                            <ul style="list-style: none; padding: 0;">
                                ${step.resources.map(resource => `
                                    <li style="background: #f0f0f0; padding: 0.5rem 1rem; border-radius: 20px; margin-bottom: 0.5rem; display: inline-block; margin-right: 0.5rem;">
                                        ${resource}
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            });
            
            // æ·»åŠ åˆ°é¡µé¢
            pathContent.innerHTML = pathHTML;
        }
        
        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ç”¨æˆ·çŠ¶æ€
        window.addEventListener('load', function() {
            checkUserStatus();
            checkShareParam();
        });

        // æœç´¢å»ºè®®æ•°æ®æº
        const searchSuggestionsData = [
            'Pythonä»å…¥é—¨åˆ°ç²¾é€š',
            'æ•°æ®åˆ†æå®æˆ˜æŒ‡å—',
            'æœºå™¨å­¦ä¹ åŸºç¡€æ•™ç¨‹',
            'è‹±è¯­è¯­æ³•å¤§å…¨',
            'é«˜æ•ˆå­¦ä¹ æ–¹æ³•',
            'ç®—æ³•ä¸æ•°æ®ç»“æ„',
            'Python',
            'æ•°æ®åˆ†æ',
            'æœºå™¨å­¦ä¹ ',
            'è‹±è¯­å­¦ä¹ ',
            'ç®—æ³•',
            'ç¼–ç¨‹å¼€å‘',
            'è®¾è®¡åˆ›æ„',
            'å¸‚åœºè¥é”€',
            'æ•™è‚²æ•™å­¦',
            'äººå·¥æ™ºèƒ½',
            'ç½‘ç»œå®‰å…¨'
        ];

        // åˆ›å»ºæœç´¢å»ºè®®å…ƒç´ 
        function createSearchSuggestions() {
            const searchContainers = document.querySelectorAll('.search-container, .hero-search');
            searchContainers.forEach(container => {
                const suggestions = document.createElement('div');
                suggestions.className = 'search-suggestions';
                suggestions.style.display = 'none';
                container.appendChild(suggestions);
            });
        }

        // æ˜¾ç¤ºæœç´¢å»ºè®®
        function showSearchSuggestions(input, suggestionsList) {
            const query = input.value.toLowerCase().trim();
            if (query.length < 1) {
                suggestionsList.style.display = 'none';
                return;
            }

            const filteredSuggestions = searchSuggestionsData.filter(item => 
                item.toLowerCase().includes(query)
            );

            if (filteredSuggestions.length > 0) {
                suggestionsList.innerHTML = filteredSuggestions.map(suggestion => 
                    `<div class="search-suggestion-item">${suggestion}</div>`
                ).join('');
                suggestionsList.style.display = 'block';
            } else {
                suggestionsList.style.display = 'none';
            }
        }

        // æœç´¢åŠŸèƒ½ - è¿‡æ»¤èµ„æ–™å¡ç‰‡
        function performSearch(query) {
            const allCards = document.querySelectorAll('.resource-card');
            let visibleCount = 0;

            allCards.forEach(card => {
                const title = card.querySelector('.resource-title').textContent.toLowerCase();
                const description = card.querySelector('.resource-description').textContent.toLowerCase();
                const tags = Array.from(card.querySelectorAll('.tag')).map(tag => tag.textContent.toLowerCase());
                const category = card.querySelector('.resource-category').textContent.toLowerCase();

                const searchTerm = query.toLowerCase();
                const isMatch = title.includes(searchTerm) || 
                               description.includes(searchTerm) || 
                               tags.some(tag => tag.includes(searchTerm)) ||
                               category.includes(searchTerm);

                if (isMatch) {
                    card.style.display = 'block';
                    card.style.animation = 'fadeInUp 0.6s ease forwards';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });

            // æ›´æ–°ç»“æœè®¡æ•°
            document.getElementById('resultCount').textContent = visibleCount;
            
            // é‡ç½®åˆ†ç±»å’Œæ ‡ç­¾çš„æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.category-card').forEach(c => c.classList.remove('active'));
            document.querySelector('.category-card:first-child').classList.add('active');
            document.querySelectorAll('.tag').forEach(tag => tag.classList.remove('active'));
        }

        // åˆå§‹åŒ–æœç´¢å»ºè®®åŠŸèƒ½
        function initSearchSuggestions() {
            createSearchSuggestions();

            // æœç´¢æ¡†è¾“å…¥äº‹ä»¶
            document.querySelectorAll('.search-container input, .hero-search input').forEach(input => {
                input.addEventListener('input', function() {
                    const suggestions = this.parentElement.querySelector('.search-suggestions');
                    showSearchSuggestions(this, suggestions);
                });

                // ç‚¹å‡»æœç´¢å»ºè®®é¡¹
                input.parentElement.querySelector('.search-suggestions').addEventListener('click', function(e) {
                    if (e.target.classList.contains('search-suggestion-item')) {
                        input.value = e.target.textContent;
                        performSearch(input.value);
                        this.style.display = 'none';
                    }
                });
            });

            // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­æœç´¢å»ºè®®
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.search-container') && !e.target.closest('.hero-search')) {
                    document.querySelectorAll('.search-suggestions').forEach(suggestions => {
                        suggestions.style.display = 'none';
                    });
                }
            });
        }

        // æœç´¢æŒ‰é’®äº‹ä»¶
        document.querySelectorAll('.search-container button').forEach(button => {
            button.addEventListener('click', function() {
                const input = this.previousElementSibling;
                const query = input.value.trim();
                performSearch(query);
                // å…³é—­æœç´¢å»ºè®®
                input.parentElement.querySelector('.search-suggestions').style.display = 'none';
            });
        });

        // å›è½¦æœç´¢
        document.querySelectorAll('.search-container input, .hero-search input').forEach(input => {
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    let button;
                    if (this.parentElement.classList.contains('hero-search')) {
                        button = this.nextElementSibling;
                    } else {
                        button = this.nextElementSibling;
                    }
                    button.click();
                    // å…³é—­æœç´¢å»ºè®®
                    this.parentElement.querySelector('.search-suggestions').style.display = 'none';
                }
            });
        });

        // è‹±é›„åŒºåŸŸæœç´¢
        const heroSearchButton = document.querySelector('.hero-search button');
        const heroSearchInput = document.querySelector('.hero-search input');
        heroSearchButton.addEventListener('click', function() {
            const query = heroSearchInput.value.trim();
            performSearch(query);
            // å…³é—­æœç´¢å»ºè®®
            heroSearchInput.parentElement.querySelector('.search-suggestions').style.display = 'none';
        });

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æœç´¢å»ºè®®
        window.addEventListener('load', initSearchSuggestions);
        
        // å­¦ä¹ è·¯å¾„æŒ‰é’®äº‹ä»¶
        document.getElementById('learningPathBtn').addEventListener('click', openLearningPathModal);
        
        // ç”Ÿæˆå­¦ä¹ è·¯å¾„æŒ‰é’®äº‹ä»¶
        document.getElementById('generatePathBtn').addEventListener('click', generateLearningPath);
        
        // æ±‰å ¡èœå•äº‹ä»¶
        document.getElementById('hamburger').addEventListener('click', function() {
            document.getElementById('navLinks').classList.toggle('active');
        });

        // èµ„æ–™å¡ç‰‡ä¸‹è½½æŒ‰é’®
        document.querySelectorAll('.resource-button').forEach(button => {
            button.addEventListener('click', function() {
                const card = this.closest('.resource-card');
                const title = card.querySelector('.resource-title').textContent;
                alert(`æ­£åœ¨ä¸‹è½½ï¼š${title}`);
                // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„ä¸‹è½½é€»è¾‘
            });
        });
        
        // æ”¶è—æŒ‰é’®äº‹ä»¶
        document.querySelectorAll('.favorite-btn').forEach(button => {
            button.addEventListener('click', function() {
                const resourceId = parseInt(this.getAttribute('data-resource-id'));
                toggleFavorite(resourceId, this);
            });
        });
        
        // å…³æ³¨æŒ‰é’®äº‹ä»¶
        document.querySelectorAll('.follow-btn').forEach(button => {
            button.addEventListener('click', function() {
                const username = this.getAttribute('data-user');
                toggleFollow(username, this);
            });
        });

        // åˆ†ç±»ç­›é€‰åŠŸèƒ½
        function filterByCategory(category) {
            const allCards = document.querySelectorAll('.resource-card');
            let visibleCount = 0;

            allCards.forEach(card => {
                const cardCategory = card.querySelector('.resource-category').textContent;
                if (category === 'å…¨éƒ¨' || cardCategory === category) {
                    card.style.display = 'block';
                    card.style.animation = 'fadeInUp 0.6s ease forwards';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });

            // æ›´æ–°ç»“æœè®¡æ•°
            document.getElementById('resultCount').textContent = visibleCount;
            
            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„activeç±»
            document.querySelectorAll('.tag').forEach(tag => tag.classList.remove('active'));
        }

        // åˆ†ç±»å¡ç‰‡ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.category-card').forEach(card => {
            card.addEventListener('click', function() {
                // ç§»é™¤æ‰€æœ‰åˆ†ç±»å¡ç‰‡çš„activeç±»
                document.querySelectorAll('.category-card').forEach(c => c.classList.remove('active'));
                // ä¸ºå½“å‰å¡ç‰‡æ·»åŠ activeç±»
                this.classList.add('active');
                // æ‰§è¡Œç­›é€‰
                const category = this.querySelector('h3').textContent;
                filterByCategory(category);
            });
        });

        // æ ‡ç­¾ç­›é€‰åŠŸèƒ½
        function filterByTag(tag) {
            const allCards = document.querySelectorAll('.resource-card');
            let visibleCount = 0;

            allCards.forEach(card => {
                const tags = Array.from(card.querySelectorAll('.tag')).map(t => t.textContent);
                if (tags.includes(tag)) {
                    card.style.display = 'block';
                    card.style.animation = 'fadeInUp 0.6s ease forwards';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });

            // æ›´æ–°ç»“æœè®¡æ•°
            document.getElementById('resultCount').textContent = visibleCount;
            
            // ç§»é™¤æ‰€æœ‰åˆ†ç±»å¡ç‰‡çš„activeç±»
            document.querySelectorAll('.category-card').forEach(c => c.classList.remove('active'));
            // ä¸º"å…¨éƒ¨"åˆ†ç±»æ·»åŠ activeç±»ï¼Œå› ä¸ºæ ‡ç­¾ç­›é€‰æ˜¯è·¨åˆ†ç±»çš„
            document.querySelector('.category-card:first-child').classList.add('active');
        }

        // æ ‡ç­¾ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.tag').forEach(tag => {
            tag.addEventListener('click', function(e) {
                e.stopPropagation(); // é˜²æ­¢è§¦å‘å¡ç‰‡ç‚¹å‡»
                const tagText = this.textContent;
                filterByTag(tagText);
                
                // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„activeç±»
                document.querySelectorAll('.tag').forEach(t => t.classList.remove('active'));
                // ä¸ºå½“å‰æ ‡ç­¾æ·»åŠ activeç±»
                this.classList.add('active');
            });
        });
        
        // å†å²è®°å½•ç®¡ç†å‡½æ•°
        function addToDownloadHistory(resource) {
            if (!currentUser) return;
            
            let downloadHistory = JSON.parse(localStorage.getItem('downloadHistory')) || {};
            if (!downloadHistory[currentUser.id]) {
                downloadHistory[currentUser.id] = [];
            }
            
            const historyItem = {
                id: Date.now(),
                resourceId: resource.id,
                title: resource.title,
                fileName: resource.fileName,
                downloadDate: new Date().toISOString(),
                category: resource.category
            };
            
            downloadHistory[currentUser.id].unshift(historyItem);
            
            // é™åˆ¶å†å²è®°å½•æ•°é‡ä¸º100æ¡
            if (downloadHistory[currentUser.id].length > 100) {
                downloadHistory[currentUser.id] = downloadHistory[currentUser.id].slice(0, 100);
            }
            
            localStorage.setItem('downloadHistory', JSON.stringify(downloadHistory));
        }
        
        function addToUploadHistory(resource) {
            if (!currentUser) return;
            
            let uploadHistory = JSON.parse(localStorage.getItem('uploadHistory')) || {};
            if (!uploadHistory[currentUser.id]) {
                uploadHistory[currentUser.id] = [];
            }
            
            const historyItem = {
                id: Date.now(),
                resourceId: resource.id,
                title: resource.title,
                fileName: resource.fileName,
                uploadDate: new Date().toISOString(),
                category: resource.category,
                fileSize: resource.fileSize
            };
            
            uploadHistory[currentUser.id].unshift(historyItem);
            
            // é™åˆ¶å†å²è®°å½•æ•°é‡ä¸º100æ¡
            if (uploadHistory[currentUser.id].length > 100) {
                uploadHistory[currentUser.id] = uploadHistory[currentUser.id].slice(0, 100);
            }
            
            localStorage.setItem('uploadHistory', JSON.stringify(uploadHistory));
        }
        
        function loadDownloadHistory() {
            if (!currentUser) return;
            
            const downloadHistory = JSON.parse(localStorage.getItem('downloadHistory')) || {};
            const userHistory = downloadHistory[currentUser.id] || [];
            const historyContent = document.getElementById('downloadHistoryContent');
            
            if (userHistory.length === 0) {
                historyContent.innerHTML = '<p style="text-align: center; color: #666; padding: 2rem;">æš‚æ— ä¸‹è½½å†å²è®°å½•</p>';
                return;
            }
            
            historyContent.innerHTML = `
                <table style="width: 100%; border-collapse: collapse; margin-bottom: 1rem;">
                    <thead>
                        <tr style="background: #f0f0f0; text-align: left;">
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">èµ„æ–™åç§°</th>
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">æ–‡ä»¶åç§°</th>
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">åˆ†ç±»</th>
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">ä¸‹è½½æ—¶é—´</th>
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${userHistory.map(item => `
                            <tr style="border-bottom: 1px solid #e0e0e0;">
                                <td style="padding: 1rem;">${item.title}</td>
                                <td style="padding: 1rem;">${item.fileName}</td>
                                <td style="padding: 1rem;">${item.category}</td>
                                <td style="padding: 1rem;">${new Date(item.downloadDate).toLocaleString()}</td>
                                <td style="padding: 1rem;">
                                    <button class="form-btn form-btn-primary" style="padding: 0.5rem 1rem; font-size: 0.8rem;" onclick="downloadResourceById(${item.resourceId})">é‡æ–°ä¸‹è½½</button>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                <div style="text-align: right; margin-top: 1rem;">
                    <p style="color: #666; font-size: 0.9rem;">å…± ${userHistory.length} æ¡è®°å½•</p>
                </div>
            `;
        }
        
        function loadUploadHistory() {
            if (!currentUser) return;
            
            const uploadHistory = JSON.parse(localStorage.getItem('uploadHistory')) || {};
            const userHistory = uploadHistory[currentUser.id] || [];
            const historyContent = document.getElementById('uploadHistoryContent');
            
            if (userHistory.length === 0) {
                historyContent.innerHTML = '<p style="text-align: center; color: #666; padding: 2rem;">æš‚æ— ä¸Šä¼ å†å²è®°å½•</p>';
                return;
            }
            
            historyContent.innerHTML = `
                <table style="width: 100%; border-collapse: collapse; margin-bottom: 1rem;">
                    <thead>
                        <tr style="background: #f0f0f0; text-align: left;">
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">èµ„æ–™åç§°</th>
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">æ–‡ä»¶åç§°</th>
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">åˆ†ç±»</th>
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">æ–‡ä»¶å¤§å°</th>
                            <th style="padding: 1rem; border-bottom: 2px solid #667eea;">ä¸Šä¼ æ—¶é—´</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${userHistory.map(item => `
                            <tr style="border-bottom: 1px solid #e0e0e0;">
                                <td style="padding: 1rem;">${item.title}</td>
                                <td style="padding: 1rem;">${item.fileName}</td>
                                <td style="padding: 1rem;">${item.category}</td>
                                <td style="padding: 1rem;">${formatFileSize(item.fileSize)}</td>
                                <td style="padding: 1rem;">${new Date(item.uploadDate).toLocaleString()}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                <div style="text-align: right; margin-top: 1rem;">
                    <p style="color: #666; font-size: 0.9rem;">å…± ${userHistory.length} æ¡è®°å½•</p>
                </div>
            `;
        }
        
        function clearDownloadHistory() {
            if (!currentUser) return;
            
            let downloadHistory = JSON.parse(localStorage.getItem('downloadHistory')) || {};
            delete downloadHistory[currentUser.id];
            localStorage.setItem('downloadHistory', JSON.stringify(downloadHistory));
            
            loadDownloadHistory();
            showNotification('ä¸‹è½½å†å²è®°å½•å·²æ¸…ç©º', 'success');
        }
        
        function clearUploadHistory() {
            if (!currentUser) return;
            
            let uploadHistory = JSON.parse(localStorage.getItem('uploadHistory')) || {};
            delete uploadHistory[currentUser.id];
            localStorage.setItem('uploadHistory', JSON.stringify(uploadHistory));
            
            loadUploadHistory();
            showNotification('ä¸Šä¼ å†å²è®°å½•å·²æ¸…ç©º', 'success');
        }
        
        function downloadResourceById(resourceId) {
            // æ ¹æ®resourceIdæ‰¾åˆ°å¯¹åº”çš„èµ„æº
            const resource = resources.find(r => r.id === resourceId);
            if (resource) {
                downloadResource(resource);
            } else {
                showNotification('èµ„æ–™ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤', 'error');
            }
        }
        
        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' B';
            else if (bytes < (1024 * 1024)) return (bytes / 1024).toFixed(1) + ' KB';
            else return (bytes / (1024 * 1024)).toFixed(2) + ' MB';
        }
        
        // é¢„è§ˆæŒ‰é’®äº‹ä»¶
        document.querySelectorAll('.preview-btn').forEach(button => {
            button.addEventListener('click', function() {
                const resourceId = parseInt(this.getAttribute('data-resource-id'));
                // è¿™é‡Œéœ€è¦æ ¹æ®resourceIdæ‰¾åˆ°å¯¹åº”çš„èµ„æºå¯¹è±¡
                // ç”±äºæ˜¯ç¤ºä¾‹ï¼Œæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿçš„èµ„æºå¯¹è±¡
                const mockResource = {
                    id: resourceId,
                    title: 'èµ„æ–™é¢„è§ˆ',
                    description: 'è¿™æ˜¯èµ„æ–™çš„é¢„è§ˆå†…å®¹...',
                    fileName: 'preview-file.pdf',
                    fileType: 'application/pdf'
                };
                previewResource(mockResource);
            });
        });

        // æ’åºåŠŸèƒ½
        document.getElementById('sortSelect').addEventListener('change', function() {
            const sortBy = this.value;
            const resourcesGrids = document.querySelectorAll('.resources-grid');
            
            resourcesGrids.forEach(resourcesGrid => {
                const allCards = Array.from(resourcesGrid.querySelectorAll('.resource-card'));

                if (sortBy === 'default') {
                    // æ¢å¤é»˜è®¤é¡ºåº
                    allCards.forEach(card => {
                        resourcesGrid.appendChild(card);
                    });
                    return;
                }

                // æ’åºé€»è¾‘
                allCards.sort((a, b) => {
                    let aVal, bVal;

                    switch(sortBy) {
                        case 'downloads':
                            aVal = parseInt(a.querySelector('.stat-item:nth-child(1)').textContent.replace('ğŸ“¥ ä¸‹è½½ï¼š', ''));
                            bVal = parseInt(b.querySelector('.stat-item:nth-child(1)').textContent.replace('ğŸ“¥ ä¸‹è½½ï¼š', ''));
                            break;
                        case 'rating':
                            aVal = parseFloat(a.querySelector('.stat-item:nth-child(2)').textContent.replace('â­ è¯„åˆ†ï¼š', ''));
                            bVal = parseFloat(b.querySelector('.stat-item:nth-child(2)').textContent.replace('â­ è¯„åˆ†ï¼š', ''));
                            break;
                        case 'date':
                            aVal = new Date(a.querySelector('.resource-meta span:nth-child(1)').textContent.replace('ğŸ“… ', ''));
                            bVal = new Date(b.querySelector('.resource-meta span:nth-child(1)').textContent.replace('ğŸ“… ', ''));
                            break;
                    }

                    return bVal - aVal; // é™åºæ’åº
                });

                // é‡æ–°æ’åˆ—å¡ç‰‡
                allCards.forEach(card => {
                    resourcesGrid.appendChild(card);
                });
            });
        });

        // æ·±è‰²æ¨¡å¼åˆ‡æ¢åŠŸèƒ½
        const themeToggle = document.getElementById('themeToggle');
        let isDarkMode = false;

        // æ£€æŸ¥ç³»ç»Ÿä¸»é¢˜åå¥½
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            isDarkMode = true;
        }

        // åˆå§‹åŒ–ä¸»é¢˜
        function initTheme() {
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
                themeToggle.textContent = 'â˜€ï¸ åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼';
            } else {
                document.body.classList.remove('dark-mode');
                themeToggle.textContent = 'ğŸŒ“ åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼';
            }
        }

        // åˆ‡æ¢ä¸»é¢˜
        themeToggle.addEventListener('click', function() {
            isDarkMode = !isDarkMode;
            initTheme();
        });

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–ä¸»é¢˜
        window.addEventListener('load', initTheme);

        // ç§»é™¤logoå‡½æ•°
        function removeLogo() {
            const logoElement = document.querySelector('.logo');
            if (logoElement) {
                logoElement.style.display = 'none';
                console.log('Logoå·²ç§»é™¤');
            }
        }

        // é¡µé¢åŠ è½½æ—¶ç§»é™¤logo
        window.addEventListener('load', removeLogo);

        // åŠ è½½æ›´å¤šåŠŸèƒ½
        document.querySelectorAll('.load-more').forEach(button => {
            button.addEventListener('click', function() {
                this.textContent = 'åŠ è½½ä¸­...';
                this.disabled = true;

                setTimeout(() => {
                    // æ¨¡æ‹ŸåŠ è½½æ›´å¤šæ•°æ®
                    const resourcesGrid = this.previousElementSibling;
                    
                    // åˆ›å»ºæ–°çš„ç¤ºä¾‹å¡ç‰‡
                    const newCard = document.createElement('div');
                    newCard.className = 'resource-card fade-in-up';
                    newCard.innerHTML = `
                        <div class="resource-image">ğŸ“–</div>
                        <div class="resource-content">
                            <span class="resource-category">ç¼–ç¨‹å¼€å‘</span>
                            <h3 class="resource-title">æ–°æ·»åŠ çš„å­¦ä¹ èµ„æ–™</h3>
                            <p class="resource-description">è¿™æ˜¯é€šè¿‡"åŠ è½½æ›´å¤š"åŠŸèƒ½åŠ¨æ€æ·»åŠ çš„å­¦ä¹ èµ„æ–™ç¤ºä¾‹ï¼Œå±•ç¤ºäº†ç½‘ç«™çš„äº¤äº’åŠŸèƒ½ã€‚</p>
                            <div class="resource-meta">
                                <span>ğŸ“… 2024-01-19</span>
                                <span>ğŸ‘¤ åˆ†äº«è€…ï¼šç³»ç»Ÿ</span>
                            </div>
                            <div class="resource-stats">
                                <span class="stat-item">ğŸ“¥ ä¸‹è½½ï¼š123</span>
                                <span class="stat-item">â­ è¯„åˆ†ï¼š4.5</span>
                                <span class="stat-item">ğŸ’¬ è¯„è®ºï¼š12</span>
                            </div>
                            <div class="tags">
                                <span class="tag">ç¤ºä¾‹</span>
                                <span class="tag">åŠ¨æ€åŠ è½½</span>
                            </div>
                            <button class="resource-button">å…è´¹ä¸‹è½½</button>
                        </div>
                    `;

                    // æ·»åŠ åˆ°ç½‘æ ¼
                    resourcesGrid.appendChild(newCard);

                    // æ›´æ–°ç»“æœè®¡æ•°
                    const totalCards = document.querySelectorAll('.resource-card').length;
                    document.getElementById('resultCount').textContent = totalCards;

                    // é‡ç½®æŒ‰é’®
                    this.textContent = 'åŠ è½½æ›´å¤š';
                    this.disabled = false;
                }, 1500);
            });
        });
        
        // èµ„æ–™é¢„è§ˆåŠŸèƒ½
        let currentPreviewResource = null;
        
        function previewResource(resource) {
            currentPreviewResource = resource;
            
            // æ›´æ–°é¢„è§ˆæ¨¡æ€æ¡†æ ‡é¢˜
            document.getElementById('previewTitle').textContent = `ğŸ‘ï¸ ${resource.title} - é¢„è§ˆ`;
            
            // è·å–é¢„è§ˆå†…å®¹å®¹å™¨
            const previewContent = document.getElementById('previewContent');
            
            // æ ¹æ®æ–‡ä»¶ç±»å‹æ˜¾ç¤ºä¸åŒçš„é¢„è§ˆå†…å®¹
            const fileExtension = resource.fileName.split('.').pop().toLowerCase();
            
            let previewHTML = '';
            
            switch (fileExtension) {
                case 'pdf':
                    previewHTML = `
                        <div style="text-align: center; padding: 2rem;">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">ğŸ“„</div>
                            <h3>${resource.fileName}</h3>
                            <p style="margin: 1rem 0; color: #666;">PDFæ–‡ä»¶é¢„è§ˆ</p>
                            <p style="background: #f0f0f0; padding: 1rem; border-radius: 8px; text-align: left;">
                                è¿™æ˜¯PDFæ–‡ä»¶çš„é¢„è§ˆå†…å®¹ã€‚ç”±äºæµè§ˆå™¨é™åˆ¶ï¼Œæ— æ³•ç›´æ¥é¢„è§ˆPDFæ–‡ä»¶å†…å®¹ã€‚
                                æ‚¨å¯ä»¥ç‚¹å‡»ä¸‹æ–¹çš„ä¸‹è½½æŒ‰é’®ä¸‹è½½å®Œæ•´æ–‡ä»¶è¿›è¡ŒæŸ¥çœ‹ã€‚
                            </p>
                        </div>
                    `;
                    break;
                case 'doc':
                case 'docx':
                    previewHTML = `
                        <div style="text-align: center; padding: 2rem;">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">ğŸ“</div>
                            <h3>${resource.fileName}</h3>
                            <p style="margin: 1rem 0; color: #666;">Wordæ–‡æ¡£é¢„è§ˆ</p>
                            <p style="background: #f0f0f0; padding: 1rem; border-radius: 8px; text-align: left;">
                                è¿™æ˜¯Wordæ–‡æ¡£çš„é¢„è§ˆå†…å®¹ã€‚ç”±äºæµè§ˆå™¨é™åˆ¶ï¼Œæ— æ³•ç›´æ¥é¢„è§ˆWordæ–‡æ¡£å†…å®¹ã€‚
                                æ‚¨å¯ä»¥ç‚¹å‡»ä¸‹æ–¹çš„ä¸‹è½½æŒ‰é’®ä¸‹è½½å®Œæ•´æ–‡ä»¶è¿›è¡ŒæŸ¥çœ‹ã€‚
                            </p>
                        </div>
                    `;
                    break;
                case 'zip':
                case 'rar':
                    previewHTML = `
                        <div style="text-align: center; padding: 2rem;">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">ğŸ“¦</div>
                            <h3>${resource.fileName}</h3>
                            <p style="margin: 1rem 0; color: #666;">å‹ç¼©æ–‡ä»¶é¢„è§ˆ</p>
                            <p style="background: #f0f0f0; padding: 1rem; border-radius: 8px; text-align: left;">
                                è¿™æ˜¯å‹ç¼©æ–‡ä»¶çš„é¢„è§ˆå†…å®¹ã€‚ç”±äºè¿™æ˜¯ä¸€ä¸ªå‹ç¼©æ–‡ä»¶ï¼Œæ— æ³•ç›´æ¥é¢„è§ˆå…¶å†…å®¹ã€‚
                                æ‚¨å¯ä»¥ç‚¹å‡»ä¸‹æ–¹çš„ä¸‹è½½æŒ‰é’®ä¸‹è½½å®Œæ•´æ–‡ä»¶å¹¶è§£å‹åæŸ¥çœ‹ã€‚
                            </p>
                        </div>
                    `;
                    break;
                case 'mp4':
                    previewHTML = `
                        <div style="text-align: center; padding: 2rem;">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">ğŸ¬</div>
                            <h3>${resource.fileName}</h3>
                            <p style="margin: 1rem 0; color: #666;">è§†é¢‘æ–‡ä»¶é¢„è§ˆ</p>
                            <p style="background: #f0f0f0; padding: 1rem; border-radius: 8px; text-align: left;">
                                è¿™æ˜¯è§†é¢‘æ–‡ä»¶çš„é¢„è§ˆå†…å®¹ã€‚ç”±äºæ–‡ä»¶å¤§å°é™åˆ¶ï¼Œæ— æ³•ç›´æ¥é¢„è§ˆè§†é¢‘å†…å®¹ã€‚
                                æ‚¨å¯ä»¥ç‚¹å‡»ä¸‹æ–¹çš„ä¸‹è½½æŒ‰é’®ä¸‹è½½å®Œæ•´æ–‡ä»¶è¿›è¡ŒæŸ¥çœ‹ã€‚
                            </p>
                        </div>
                    `;
                    break;
                case 'mp3':
                    previewHTML = `
                        <div style="text-align: center; padding: 2rem;">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">ğŸµ</div>
                            <h3>${resource.fileName}</h3>
                            <p style="margin: 1rem 0; color: #666;">éŸ³é¢‘æ–‡ä»¶é¢„è§ˆ</p>
                            <p style="background: #f0f0f0; padding: 1rem; border-radius: 8px; text-align: left;">
                                è¿™æ˜¯éŸ³é¢‘æ–‡ä»¶çš„é¢„è§ˆå†…å®¹ã€‚ç”±äºæ–‡ä»¶å¤§å°é™åˆ¶ï¼Œæ— æ³•ç›´æ¥é¢„è§ˆéŸ³é¢‘å†…å®¹ã€‚
                                æ‚¨å¯ä»¥ç‚¹å‡»ä¸‹æ–¹çš„ä¸‹è½½æŒ‰é’®ä¸‹è½½å®Œæ•´æ–‡ä»¶è¿›è¡Œæ”¶å¬ã€‚
                            </p>
                        </div>
                    `;
                    break;
                default:
                    previewHTML = `
                        <div style="text-align: center; padding: 2rem;">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">ğŸ“</div>
                            <h3>${resource.fileName}</h3>
                            <p style="margin: 1rem 0; color: #666;">æ–‡ä»¶é¢„è§ˆ</p>
                            <p style="background: #f0f0f0; padding: 1rem; border-radius: 8px; text-align: left;">
                                è¿™æ˜¯æ–‡ä»¶çš„é¢„è§ˆå†…å®¹ã€‚ç”±äºæ–‡ä»¶ç±»å‹é™åˆ¶ï¼Œæ— æ³•ç›´æ¥é¢„è§ˆæ–‡ä»¶å†…å®¹ã€‚
                                æ‚¨å¯ä»¥ç‚¹å‡»ä¸‹æ–¹çš„ä¸‹è½½æŒ‰é’®ä¸‹è½½å®Œæ•´æ–‡ä»¶è¿›è¡ŒæŸ¥çœ‹ã€‚
                            </p>
                        </div>
                    `;
                    break;
            }
            
            // æ›´æ–°é¢„è§ˆå†…å®¹
            previewContent.innerHTML = previewHTML;
            
            // æ˜¾ç¤ºé¢„è§ˆæ¨¡æ€æ¡†
            modals.preview.style.display = 'block';
            
            // ä¸ºä¸‹è½½æŒ‰é’®æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
            document.getElementById('downloadFromPreviewBtn').onclick = function() {
                if (currentPreviewResource) {
                    // è¿™é‡Œå¯ä»¥è°ƒç”¨ä¸‹è½½å‡½æ•°
                    showNotification(`æ­£åœ¨ä¸‹è½½ï¼š${currentPreviewResource.title}`, 'info');
                    
                    // æ¨¡æ‹Ÿä¸‹è½½å®Œæˆ
                    setTimeout(() => {
                        showNotification(`ä¸‹è½½å®Œæˆï¼š${currentPreviewResource.title}`, 'success');
                        // æ·»åŠ åˆ°ä¸‹è½½å†å²è®°å½•
                        addToDownloadHistory(currentPreviewResource);
                    }, 1000);
                }
            };
        }
    </script>
</body>
</html>